var Cango,SVGsegs,circle,ellipse,square,rectangle,triangle,cross,ex,Path,Shape,Img,Text,ClipMask,Group,LinearGradient,RadialGradient,Tweener,initZoomPan;!function(){"use strict";var t=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),e=0,s={M:"moveTo",L:"lineTo",C:"bezierCurveTo",Z:"closePath"};SVGPathElement.prototype.getPathData&&SVGPathElement.prototype.setPathData||function(){var t={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},e=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},s=-1!==window.navigator.userAgent.indexOf("MSIE ");e.prototype={parseSegment:function(){var e=this._string[this._currentIndex],s=t[e]?t[e]:null;if(null===s){if(null===this._prevCommand)return null;if(null===(s=("+"===e||"-"===e||"."===e||e>="0"&&"9">=e)&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;this._prevCommand=s;var i=null,r=s.toUpperCase();return"H"===r||"V"===r?i=[this._parseNumber()]:"M"===r||"L"===r||"T"===r?i=[this._parseNumber(),this._parseNumber()]:"S"===r||"Q"===r?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===r?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===r?i=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===r&&(this._skipOptionalSpaces(),i=[]),null===i||i.indexOf(null)>=0?null:{type:s,values:i}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var e=this._string[this._currentIndex];return t[e]?t[e]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return"M"===t||"m"===t},_isCurrentSpace:function(){var t=this._string[this._currentIndex];return" ">=t&&(" "===t||"\n"===t||"\t"===t||"\r"===t||"\f"===t)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var t=0,e=0,s=1,i=0,r=1,a=1,n=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,r=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&"."!==this._string[this._currentIndex])return null;for(var o=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==o)for(var h=this._currentIndex-1,l=1;h>=o;)e+=l*(this._string[h]-"0"),h-=1,l*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)s*=10,i+=(this._string.charAt(this._currentIndex)-"0")/s,this._currentIndex+=1}if(this._currentIndex!==n&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,a=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)t*=10,t+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var c=e+i;return c*=r,t&&(c*=Math.pow(10,a*t)),n===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),c)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var t=null,e=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===e)t=0;else{if("1"!==e)return null;t=1}return this._skipOptionalSpacesOrDelimiter(),t}};var i=function(t){if(!t||0===t.length)return[];var s=new e(t),i=[];if(s.initialCommandIsMoveTo())for(;s.hasMoreData();){var r=s.parseSegment();if(null===r)break;i.push(r)}return i},r=SVGPathElement.prototype.setAttribute,a=SVGPathElement.prototype.removeAttribute,n=window.Symbol?Symbol():"__cachedPathData",o=window.Symbol?Symbol():"__cachedNormalizedPathData",h=function(t,e,s,i,r,a,n,o,l,c){var p,u,d,f,g=function(t,e,s){return{x:t*Math.cos(s)-e*Math.sin(s),y:t*Math.sin(s)+e*Math.cos(s)}},y=function(t){return Math.PI*t/180}(n),v=[];if(c)p=c[0],u=c[1],d=c[2],f=c[3];else{var m=g(t,e,-y);t=m.x,e=m.y;var x=g(s,i,-y),C=(t-(s=x.x))/2,w=(e-(i=x.y))/2,b=C*C/(r*r)+w*w/(a*a);b>1&&(r*=b=Math.sqrt(b),a*=b);var O=r*r,S=a*a,T=O*S-O*w*w-S*C*C,k=O*w*w+S*C*C,_=(o===l?-1:1)*Math.sqrt(Math.abs(T/k));d=_*r*w/a+(t+s)/2,f=_*-a*C/r+(e+i)/2,p=Math.asin(parseFloat(((e-f)/a).toFixed(9))),u=Math.asin(parseFloat(((i-f)/a).toFixed(9))),d>t&&(p=Math.PI-p),d>s&&(u=Math.PI-u),0>p&&(p=2*Math.PI+p),0>u&&(u=2*Math.PI+u),l&&p>u&&(p-=2*Math.PI),!l&&u>p&&(u-=2*Math.PI)}var P=u-p;if(Math.abs(P)>120*Math.PI/180){var A=u,I=s,W=i;u=l&&u>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,s=d+r*Math.cos(u),i=f+a*Math.sin(u),v=h(s,i,I,W,r,a,n,0,l,[u,A,d,f])}P=u-p;var M=Math.cos(p),N=Math.sin(p),E=Math.cos(u),G=Math.sin(u),L=Math.tan(P/4),D=4/3*r*L,V=4/3*a*L,R=[t,e],Y=[t+D*N,e-V*M],H=[s+D*G,i-V*E],X=[s,i];if(Y[0]=2*R[0]-Y[0],Y[1]=2*R[1]-Y[1],c)return[Y,H,X].concat(v);v=[Y,H,X].concat(v);for(var F=[],B=0;B<v.length;B+=3){r=g(v[B][0],v[B][1],y),a=g(v[B+1][0],v[B+1][1],y);var j=g(v[B+2][0],v[B+2][1],y);F.push([r.x,r.y,a.x,a.y,j.x,j.y])}return F},l=function(t){return t.map(function(t){return{type:t.type,values:Array.prototype.slice.call(t.values)}})},c=function(t){var e=[],s=null,i=null,r=null,a=null,n=null,o=null,l=null;return t.forEach(function(t){if("M"===t.type){var c=t.values[0],p=t.values[1];e.push({type:"M",values:[c,p]}),o=c,l=p,a=c,n=p}else if("C"===t.type){var u=t.values[0],d=t.values[1],f=t.values[2],g=t.values[3];c=t.values[4],p=t.values[5];e.push({type:"C",values:[u,d,f,g,c,p]}),i=f,r=g,a=c,n=p}else if("L"===t.type){c=t.values[0],p=t.values[1];e.push({type:"L",values:[c,p]}),a=c,n=p}else if("H"===t.type){c=t.values[0];e.push({type:"L",values:[c,n]}),a=c}else if("V"===t.type){p=t.values[0];e.push({type:"L",values:[a,p]}),n=p}else if("S"===t.type){f=t.values[0],g=t.values[1],c=t.values[2],p=t.values[3];"C"===s||"S"===s?(y=a+(a-i),v=n+(n-r)):(y=a,v=n),e.push({type:"C",values:[y,v,f,g,c,p]}),i=f,r=g,a=c,n=p}else if("T"===t.type){c=t.values[0],p=t.values[1];"Q"===s||"T"===s?(u=a+(a-i),d=n+(n-r)):(u=a,d=n);var y=a+2*(u-a)/3,v=n+2*(d-n)/3,m=c+2*(u-c)/3,x=p+2*(d-p)/3;e.push({type:"C",values:[y,v,m,x,c,p]}),i=u,r=d,a=c,n=p}else if("Q"===t.type){u=t.values[0],d=t.values[1],c=t.values[2],p=t.values[3],y=a+2*(u-a)/3,v=n+2*(d-n)/3,m=c+2*(u-c)/3,x=p+2*(d-p)/3;e.push({type:"C",values:[y,v,m,x,c,p]}),i=u,r=d,a=c,n=p}else if("A"===t.type){var C=Math.abs(t.values[0]),w=Math.abs(t.values[1]),b=t.values[2],O=t.values[3],S=t.values[4];c=t.values[5],p=t.values[6];if(0===C||0===w)e.push({type:"C",values:[a,n,c,p,c,p]}),a=c,n=p;else if(a!==c||n!==p){h(a,n,c,p,C,w,b,O,S).forEach(function(t){e.push({type:"C",values:t})}),a=c,n=p}}else"Z"===t.type&&(e.push(t),a=o,n=l);s=t.type}),e};SVGPathElement.prototype.setAttribute=function(t,e){"d"===t&&(this[n]=null,this[o]=null),r.call(this,t,e)},SVGPathElement.prototype.removeAttribute=function(t,e){"d"===t&&(this[n]=null,this[o]=null),a.call(this,t)},SVGPathElement.prototype.getPathData=function(t){if(t&&t.normalize){if(this[o])return l(this[o]);this[n]?s=l(this[n]):(s=i(this.getAttribute("d")||""),this[n]=l(s));var e=c(function(t){var e=[],s=null,i=null,r=null,a=null;return t.forEach(function(t){var n=t.type;if("M"===n){var o=t.values[0],h=t.values[1];e.push({type:"M",values:[o,h]}),r=o,a=h,s=o,i=h}else if("m"===n)o=s+t.values[0],h=i+t.values[1],e.push({type:"M",values:[o,h]}),r=o,a=h,s=o,i=h;else if("L"===n)o=t.values[0],h=t.values[1],e.push({type:"L",values:[o,h]}),s=o,i=h;else if("l"===n)o=s+t.values[0],h=i+t.values[1],e.push({type:"L",values:[o,h]}),s=o,i=h;else if("C"===n){var l=t.values[0],c=t.values[1],p=t.values[2],u=t.values[3];o=t.values[4],h=t.values[5],e.push({type:"C",values:[l,c,p,u,o,h]}),s=o,i=h}else"c"===n?(l=s+t.values[0],c=i+t.values[1],p=s+t.values[2],u=i+t.values[3],o=s+t.values[4],h=i+t.values[5],e.push({type:"C",values:[l,c,p,u,o,h]}),s=o,i=h):"Q"===n?(l=t.values[0],c=t.values[1],o=t.values[2],h=t.values[3],e.push({type:"Q",values:[l,c,o,h]}),s=o,i=h):"q"===n?(l=s+t.values[0],c=i+t.values[1],o=s+t.values[2],h=i+t.values[3],e.push({type:"Q",values:[l,c,o,h]}),s=o,i=h):"A"===n?(o=t.values[5],h=t.values[6],e.push({type:"A",values:[t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],o,h]}),s=o,i=h):"a"===n?(o=s+t.values[5],h=i+t.values[6],e.push({type:"A",values:[t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],o,h]}),s=o,i=h):"H"===n?(o=t.values[0],e.push({type:"H",values:[o]}),s=o):"h"===n?(o=s+t.values[0],e.push({type:"H",values:[o]}),s=o):"V"===n?(h=t.values[0],e.push({type:"V",values:[h]}),i=h):"v"===n?(h=i+t.values[0],e.push({type:"V",values:[h]}),i=h):"S"===n?(p=t.values[0],u=t.values[1],o=t.values[2],h=t.values[3],e.push({type:"S",values:[p,u,o,h]}),s=o,i=h):"s"===n?(p=s+t.values[0],u=i+t.values[1],o=s+t.values[2],h=i+t.values[3],e.push({type:"S",values:[p,u,o,h]}),s=o,i=h):"T"===n?(o=t.values[0],h=t.values[1],e.push({type:"T",values:[o,h]}),s=o,i=h):"t"===n?(o=s+t.values[0],h=i+t.values[1],e.push({type:"T",values:[o,h]}),s=o,i=h):("Z"===n||"z"===n)&&(e.push({type:"Z",values:[]}),s=r,i=a)}),e}(s));return this[o]=l(e),e}if(this[n])return l(this[n]);var s=i(this.getAttribute("d")||"");return this[n]=l(s),s},SVGPathElement.prototype.setPathData=function(t){if(0===t.length)s?this.setAttribute("d",""):this.removeAttribute("d");else{for(var e="",i=0,r=t.length;r>i;i+=1){var a=t[i];i>0&&(e+=" "),e+=a.type,a.values&&a.values.length>0&&(e+=" "+a.values.join(" "))}this.setAttribute("d",e)}},SVGRectElement.prototype.getPathData=function(t){var e=this.x.baseVal.value,s=this.y.baseVal.value,i=this.width.baseVal.value,r=this.height.baseVal.value,a=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,n=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;a>i/2&&(a=i/2),n>r/2&&(n=r/2);var o=[{type:"M",values:[e+a,s]},{type:"H",values:[e+i-a]},{type:"A",values:[a,n,0,0,1,e+i,s+n]},{type:"V",values:[s+r-n]},{type:"A",values:[a,n,0,0,1,e+i-a,s+r]},{type:"H",values:[e+a]},{type:"A",values:[a,n,0,0,1,e,s+r-n]},{type:"V",values:[s+n]},{type:"A",values:[a,n,0,0,1,e+a,s]},{type:"Z",values:[]}];return o=o.filter(function(t){return"A"!==t.type||0!==t.values[0]&&0!==t.values[1]}),t&&!0===t.normalize&&(o=c(o)),o},SVGCircleElement.prototype.getPathData=function(t){var e=this.cx.baseVal.value,s=this.cy.baseVal.value,i=this.r.baseVal.value,r=[{type:"M",values:[e+i,s]},{type:"A",values:[i,i,0,0,1,e,s+i]},{type:"A",values:[i,i,0,0,1,e-i,s]},{type:"A",values:[i,i,0,0,1,e,s-i]},{type:"A",values:[i,i,0,0,1,e+i,s]},{type:"Z",values:[]}];return t&&!0===t.normalize&&(r=c(r)),r},SVGEllipseElement.prototype.getPathData=function(t){var e=this.cx.baseVal.value,s=this.cy.baseVal.value,i=this.rx.baseVal.value,r=this.ry.baseVal.value,a=[{type:"M",values:[e+i,s]},{type:"A",values:[i,r,0,0,1,e,s+r]},{type:"A",values:[i,r,0,0,1,e-i,s]},{type:"A",values:[i,r,0,0,1,e,s-r]},{type:"A",values:[i,r,0,0,1,e+i,s]},{type:"Z",values:[]}];return t&&!0===t.normalize&&(a=c(a)),a},SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},SVGPolylineElement.prototype.getPathData=function(){for(var t=[],e=0;e<this.points.numberOfItems;e+=1){var s=this.points.getItem(e);t.push({type:0===e?"M":"L",values:[s.x,s.y]})}return t},SVGPolygonElement.prototype.getPathData=function(){for(var t=[],e=0;e<this.points.numberOfItems;e+=1){var s=this.points.getItem(e);t.push({type:0===e?"M":"L",values:[s.x,s.y]})}return t.push({type:"Z",values:[]}),t}}();var i=function(){return e+=1};function r(t){if(t)return JSON.parse(JSON.stringify(t))}var a=function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",t),e};function n(t,e,s){return{x:t*s.a+e*s.c+s.e,y:t*s.b+e*s.d+s.f}}function o(t){t.a=1,t.b=0,t.c=0,t.d=1,t.e=0,t.f=0}SVGsegs=class extends Array{constructor(t){let e="";"string"==typeof t&&t.length?e=t:Array.isArray(t)&&t.length&&(e=t.join(" ")),super(...new a(e).getPathData({normalize:!0}))}toString(){const t=[];return this.forEach(e=>{t.push(e.type,...e.values)}),t.join(" ")}dup(){const t=[];return this.forEach(e=>{t.push(e.type,...e.values)}),new SVGsegs(t)}translate(t,e){const s=[],i=t||0,r=e||0;return this.forEach(function(t){s.push(t.type);for(let e=0;e<t.values.length;e+=2)s.push(t.values[e]+i,t.values[e+1]+r)}),new SVGsegs(s)}scale(t,e){const s=[],i=t||1,r=e||i;return this.forEach(function(t){s.push(t.type);for(let e=0;e<t.values.length;e+=2)s.push(t.values[e]*i,t.values[e+1]*r)}),new SVGsegs(s)}rotate(t){const e=[],s=t||0,i=Math.PI/180,r=Math.sin(s*i),a=Math.cos(s*i);return this.forEach(function(t){e.push(t.type);for(let s=0;s<t.values.length;s+=2){let i=t.values[s],n=t.values[s+1];e.push(i*a+n*r,-i*r+n*a)}}),new SVGsegs(e)}skew(t,e){const s=[],i=t||0,r=e||0,a=Math.PI/180,n=Math.tan(-i*a),o=Math.tan(r*a);return this.forEach(function(t){s.push(t.type);for(let e=0;e<t.values.length;e+=2){let i=t.values[e],r=t.values[e+1];s.push(i+r*n,i*o+r)}}),new SVGsegs(s)}appendPath(t){let e=[],s=[];if(t instanceof SVGsegs)t.forEach(t=>{e.push(t.type,...t.values)});else{new SVGsegs(t).forEach(t=>{e.push(t.type,...t.values)})}this.forEach(t=>{s.push(t.type,...t.values)});const i=s.concat(e);return new SVGsegs(i)}joinPath(t){const e=[];let s;if(s=t instanceof SVGsegs?t:new SVGsegs(t),0==this.length)s.forEach(t=>{e.push(t.type,...t.values)});else{"Z"==this[this.length-1].type&&(this.length=this.length-1),this.forEach(t=>{e.push(t.type,...t.values)});for(let t=1;t<s.length;t++)e.push(s[t].type,...s[t].values)}return new SVGsegs(e)}revWinding(){let t,e,s,i=this,r=null;const a=[],n=[];function o(t){const e=[];for(let s=t.length;s>0;s-=2)e.push(t[s-2],t[s-1]);return e}for("Z"===i[i.length-1].type&&(r=i[i.length-1],i.length=i.length-1),e=i[t=i.length-1].values.length,s={type:"M",values:[i[t].values[e-2],i[t].values[e-1]]},a.push(s),i[t].values=i[t].values.slice(0,-2);t>0;)s={type:i[t].type,values:o(i[t].values)},e=i[t-1].values.length,s.values.push(i[t-1].values[e-2],i[t-1].values[e-1]),a.push(s),i[t-1].values=i[t-1].values.slice(0,-2),t-=1;return r&&a.push(r),a.forEach(t=>{n.push(t.type,...t.values)}),new SVGsegs(n)}},circle=function(t){const e=t||1;return["m",-.5*e,0,"c",0,-.27614*e,.22386*e,-.5*e,.5*e,-.5*e,"c",.27614*e,0,.5*e,.22386*e,.5*e,.5*e,"c",0,.27614*e,-.22386*e,.5*e,-.5*e,.5*e,"c",-.27614*e,0,-.5*e,-.22386*e,-.5*e,-.5*e,"z"]},ellipse=function(t,e){const s=t||1;let i=s;return"number"==typeof e&&e>0&&(i=e),["m",-.5*s,0,"c",0,-.27614*i,.22386*s,-.5*i,.5*s,-.5*i,"c",.27614*s,0,.5*s,.22386*i,.5*s,.5*i,"c",0,.27614*i,-.22386*s,.5*i,-.5*s,.5*i,"c",-.27614*s,0,-.5*s,-.22386*i,-.5*s,-.5*i,"z"]},square=function(t){const e=t||1;return["m",.5*e,-.5*e,"l",0,e,-e,0,0,-e,"z"]},rectangle=function(t,e,s){const i=t||1,r=e||i;let a;if(void 0===s||s<=0)a=["m",-i/2,-r/2,"l",i,0,0,r,-i,0,"z"];else{const t=Math.min(i/2,r/2,s);a=["m",-i/2+t,-r/2,"l",i-2*t,0,"a",t,t,0,0,1,t,t,"l",0,r-2*t,"a",t,t,0,0,1,-t,t,"l",2*t-i,0,"a",t,t,0,0,1,-t,-t,"l",0,2*t-r,"a",t,t,0,0,1,t,-t,"z"]}return a},triangle=function(t){const e=t||1;return["m",.5*e,-.289*e,"l",-.5*e,.866*e,-.5*e,-.866*e,"z"]},cross=function(t){const e=t||1;return["m",-.5*e,0,"l",e,0,"m",-.5*e,-.5*e,"l",0,e]},ex=function(t){const e=t||1;return["m",-.3535*e,-.3535*e,"l",.707*e,.707*e,"m",-.707*e,0,"l",.707*e,-.707*e]},LinearGradient=function(t,e,s,i){this.grad=[t,e,s,i],this.colorStops=[],this.addColorStop=function(){this.colorStops.push(arguments)}},RadialGradient=function(t,e,s,i,r,a){this.grad=[t,e,s,i,r,a],this.colorStops=[],this.addColorStop=function(){this.colorStops.push(arguments)}},Tweener=function(t,e,s){this.delay=t||0,this.dur=e||5e3,this.reStartOfs=0,this.loop=!1,this.loopAll=!1;var i=this,r="noloop";"string"==typeof s&&(r=s.toLowerCase()),"loop"===r?this.loop=!0:"loopall"===r&&(this.loopAll=!0),this.getVal=function(t,e,s){var r,a,n,o,h,l,c,p,u,d=0;if(0===t&&(i.reStartOfs=0),(c=t-i.reStartOfs)>i.dur+i.delay&&i.dur>0&&(i.loop||i.loopAll)&&(i.reStartOfs=i.loop?t-i.delay:t,c=0),d=0,c>i.delay&&(d=c-i.delay),!Array.isArray(e))return e;if(!e.length)return 0;if(1===e.length)return e[0];if(0===d)return e[0];if(d>=i.dur)return e[e.length-1];if(r=e.length-1,!Array.isArray(s)||e.length!==s.length)return a=i.dur/r,o=(d-(n=Math.floor(d/a))*a)/a,e[n]+o*(e[n+1]-e[n]);for(p=[].concat(e),0!==(u=[].concat(s))[0]&&(p.unshift(p[0]),u.unshift(0)),100!==u[u.length-1]&&(p.push(p[p.length-1]),u.push(100)),h=0,l=d/i.dur;h<u.length-1&&u[h+1]/100<l;)h++;return a=(u[h+1]-u[h])/100,o=(l-u[h]/100)/a,p[h]+o*(p[h+1]-p[h])}};var h={TRN:function(t){var e=t[0]||0,s=t[1]||0;if(!this.hasOwnProperty("type"))return{x:this.x+e,y:this.y+s};this.ofsTfm=this.ofsTfm.translate(e,s)},SCL:function(t){var e=t[0]||1,s=t[1]||e;if(!this.hasOwnProperty("type"))return{x:this.x*e,y:this.y*s};this.ofsTfm=this.ofsTfm.scaleNonUniform(e,s)},ROT:function(t){var e=t[0]||0,s=Math.PI/180,i=Math.sin(-e*s),r=Math.cos(-e*s);if(!this.hasOwnProperty("type"))return{x:this.x*r+this.y*i,y:-this.x*i+this.y*r};this.ofsTfm=this.ofsTfm.rotate(e)},SKW:function(t){var e=t[2]||1,s=t[0]||0,i=t[1]||0,r=Math.PI/180,a=Math.tan(-s*r)/e,n=Math.tan(i*r)*e;if(!this.hasOwnProperty("type"))return{x:this.x+this.y*a,y:this.x*n+this.y};this.ofsTfm=this.ofsTfm.skewX(-s),this.ofsTfm=this.ofsTfm.skewY(i)},REV:function(t){var e=t[0]||0,s=Math.PI/180,i=Math.sin(-e*s),r=Math.cos(-e*s);if(!this.hasOwnProperty("type"))return{x:this.x*r+this.y*i,y:-this.x*i+this.y*r};this.ofsTfm=this.ofsTfm.rotate(e)}};function l(t){var e=Array.prototype.slice.call(arguments).slice(1);this.type=t,this.args=e}function c(t,e){if("string"==typeof t&&void 0!==e)switch(t.toLowerCase()){case"fillrule":if("string"!=typeof e)return;"evenodd"!==e&&"nonzero"!==e||(this.fillRule=e);break;case"fillcolor":this.fillCol=e;break;case"strokecolor":this.strokeCol=e;break;case"linewidth":case"strokewidth":"number"==typeof e&&e>0&&(this.lineWidth=e);break;case"linewidthwc":"number"==typeof e&&e>0&&(this.lineWidthWC=e);break;case"linecap":if("string"!=typeof e)return;"butt"!==e&&"round"!==e&&"square"!==e||(this.lineCap=e);break;case"iso":case"isotropic":this.iso=1==e||"iso"===e||"isotropic"===e;break;case"dashed":Array.isArray(e)&&e[0]?this.dashed=e:this.dashed=[];break;case"dashoffset":this.dashOffset=e||0;break;case"border":!0===e&&(this.border=!0),!1===e&&(this.border=!1);break;case"fontsize":"number"==typeof e&&e>0&&(this.fontSize=e);break;case"fontweight":("string"==typeof e||"number"==typeof e&&e>=100&&e<=900)&&(this.fontWeight=e);break;case"fontfamily":"string"==typeof e&&(this.fontFamily=e);break;case"bgfillcolor":this.bgFillColor=e;break;case"imgwidth":this.imgWidth=Math.abs(e);break;case"imgheight":this.imgHeight=Math.abs(e);break;case"lorg":-1!==[1,2,3,4,5,6,7,8,9].indexOf(e)&&(this.lorg=e);break;case"shadowoffsetx":this.shadowOffsetX=e||0;break;case"shadowoffsety":this.shadowOffsetY=e||0;break;case"shadowblur":this.shadowBlur=e||0;break;case"shadowcolor":this.shadowColor=e;break;case"x":var s=new l("TRN",e,0);this.hardTfmAry.unshift(s);break;case"y":var i=new l("TRN",0,e);this.hardTfmAry.unshift(i);break;case"degs":var r=new l("ROT",e);this.hardTfmAry.push(r);break;case"scl":var a=0!=e?e:1,n=new l("SCL",a,a);this.hardTfmAry.push(n);break;case"skewx":var o=new l("SKW",e,0);this.hardTfmAry.unshift(o);break;case"skewy":var h=new l("SKW",0,e);this.hardTfmAry.unshift(h);break;default:return}}function p(){this.type="OBJ2D",this.drawCmds=[],this.lineWidthWC=null,this.lineWidth=null,this.savScale=1,this.iso=!0,this.parent=null,this.dwgOrg={x:0,y:0},this.hardTfmAry=[],this.ofsTfmAry=[],this.netTfmAry=[],this.ofsTfm=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),this.netTfm=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),this.dragNdrop=null}function u(t){var e,s,i=null,r=!1,a=Date.now();t.prevAnimMode===t.modes.STOPPED&&(t.startTime=a-t.startOfs),e=a-t.startTime,t.animTasks.forEach(function(a){a.gc.cId!==i&&(r=!0,i=a.gc.cId),a.gc.ctx.save(),t.prevAnimMode===t.modes.STOPPED&&(a.currState.time=0),r&&!a.options.hasOwnProperty("manualClear")&&a.gc.clearCanvas(),"function"==typeof a.pathFn&&a.pathFn.call(a,e,a.options),"function"==typeof a.drawFn&&a.drawFn.call(a,a.options),r=!1,a.gc.ctx.restore(),s=a.currState,a.currState=a.nextState,a.nextState=s,a.currState.time=e}),t.currTime=e}function d(){this.animTasks=[],this.timer=null,this.modes={PAUSED:1,STOPPED:2,PLAYING:3,STEPPING:4},this.animMode=this.modes.STOPPED,this.prevAnimMode=this.modes.STOPPED,this.startTime=0,this.startOfs=0,this.currTime=0,this.stepTime=50,this.frameRate=void 0,this.interval=0}function f(t,e){this.id=t,this.cElem=e,this.dragObjects=[]}function g(t){var e,s=t.bkgCanvas.layers[0];for(e=1;e<t.bkgCanvas.layers.length;e++)if(t.bkgCanvas.layers[e].id===t.cId){s=t.bkgCanvas.layers[e];break}return s}(Group=function(){this.type="GRP",this.parent=null,this.children=[],this.dwgOrg={x:0,y:0},this.ofsTfmAry=[],this.netTfmAry=[],this.ofsTfm=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),this.netTfm=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),this.dragNdropHandlers=null,this.addObj.apply(this,arguments)}).prototype.deleteObj=function(t){var e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)},Group.prototype.addObj=function(){var t=this;!function e(s){s.forEach(function(s){var i;Array.isArray(s)?e(s):s&&s.type&&((i=s).parent=t,t.children.push(i),!i.dragNdrop&&t.dragNdropHandlers&&(i.enableDrag.apply(i,t.dragNdropHandlers),i.dragNdrop.target=t))})}(Array.prototype.slice.call(arguments))},Group.prototype.enableDrag=function(t,e,s){this.dragNdropHandlers=arguments,function i(r){r.children.forEach(function(r){"GRP"===r.type?i(r):null===r.dragNdrop&&(r.enableDrag(t,e,s),r.dragNdrop.target=r)})}(this)},Group.prototype.disableDrag=function(){this.dragNdropHandlers=void 0,function t(e){e.children.forEach(function(e){"GRP"===e.type?t(e):e.disableDrag()})}(this)},Group.prototype.translate=function(t,e){var s=new l("TRN",t,e);this.ofsTfmAry.unshift(s)},Group.prototype.rotate=function(t){var e=new l("ROT",t);this.ofsTfmAry.push(e)},Group.prototype.skew=function(t,e){var s=new l("SKW",t,e);this.ofsTfmAry.push(s)},Group.prototype.scale=function(t,e){var s=new l("SCL",t,e);this.ofsTfmAry.push(s)},Group.prototype.revolve=function(t){var e=new l("REV",t);this.ofsTfmAry.unshift(e)},Group.prototype.transformReset=function(){this.ofsTfmAry=[],o(this.ofsTfm)},p.prototype.enableDrag=function(t,e,s){this.dragNdrop=new function(t,e,s){var i,r,a=this;this.cgo=null,this.layer=null,this.target=null,this.grabCallback=t||null,this.dragCallback=e||null,this.dropCallback=s||null,this.grabCsrPos={x:0,y:0},this.grabDwgOrg={x:0,y:0},this.grabOfs={x:0,y:0},this.grab=function(t){var e,s=t||window.event;return i=this.cgo.bkgCanvas.layers.length,(r=this.cgo.bkgCanvas.layers[i-1].cElem).onmouseup=function(t){a.drop(t)},r.onmouseout=function(t){a.drop(t)},e=this.cgo.getCursorPosWC(s),this.grabCsrPos.x=e.x,this.grabCsrPos.y=e.y,this.grabDwgOrg.x=this.target.dwgOrg.x,this.grabDwgOrg.y=this.target.dwgOrg.y,this.grabOfs.x=e.x-this.grabDwgOrg.x,this.grabOfs.y=e.y-this.grabDwgOrg.y,this.grabCallback&&this.grabCallback(e),r.onmousemove=function(t){a.drag(t)},s.preventDefault(),!1},this.drag=function(t){var e;this.dragCallback&&(e=this.cgo.getCursorPosWC(t),a.dragCallback(e))},this.drop=function(t){var e=this.cgo.getCursorPosWC(t);r.onmouseup=null,r.onmouseout=null,r.onmousemove=null,this.dropCallback&&this.dropCallback(e)},this.cancelDrag=function(t){r.onmouseup=null,r.onmouseout=null,r.onmousemove=null,this.dropCallback&&this.dropCallback(t)}}(t,e,s),this.dragNdrop.target=this},p.prototype.disableDrag=function(){var t;this.dragNdrop&&(t=this.dragNdrop.layer.dragObjects.indexOf(this),this.dragNdrop.layer.dragObjects.splice(t,1),this.dragNdrop=null)},p.prototype.translate=function(t,e){var s=new l("TRN",t,e);this.ofsTfmAry.unshift(s)},p.prototype.rotate=function(t){var e=new l("ROT",t);this.ofsTfmAry.push(e)},p.prototype.skew=function(t,e){var s=new l("SKW",t,e);this.ofsTfmAry.push(s)},p.prototype.scale=function(t,e){var s=new l("SCL",t,e);this.ofsTfmAry.push(s)},p.prototype.revolve=function(t){var e=new l("REV",t);this.ofsTfmAry.unshift(e)},p.prototype.transformReset=function(){this.ofsTfmAry=[],o(this.ofsTfm)},(ClipMask=function(t,e){var s=e||{};p.call(this),this.type="CLIP",this.iso=!1,this.fillRule="nonzero",this.drawCmds=[],this.setDescriptor=function(t){if(t instanceof SVGsegs)this.drawCmds=t;else if("string"==typeof t&&t.length){const e=new a(t);this.drawCmds=e.getPathData({normalize:!0})}else if(t&&t.length&&(ArrayBuffer.isView(t)&&(t=Array.from(t)),Array.isArray(t))){let e;e="number"==typeof t[0]?new a("M "+t.join(" ")):new a(t.join(" ")),this.drawCmds=e.getPathData({normalize:!0})}},this.setDescriptor(t),s.hasOwnProperty("iso")?this.setProperty("iso",s.iso):s.hasOwnProperty("isotropic")?this.setProperty("iso",s.isotropic):this.iso=!1,s.hasOwnProperty("fillRule")&&(this.fillRule=s.fillRule)}).prototype=Object.create(p.prototype),ClipMask.prototype.constructor=ClipMask,ClipMask.prototype.setProperty=c,ClipMask.prototype.dup=function(){var t=new ClipMask;return t.type=this.type,t.drawCmds=r(this.drawCmds),t.parent=null,t.dwgOrg=r(this.dwgOrg),t.hardTfmAry=r(this.hardTfmAry),t.ofsTfmAry=r(this.ofsTfmAry),t.fillRule=this.fillRule,t.border=this.border,t.strokeCol=this.strokeCol,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.iso=this.iso,t},(Path=function(t,e){var s,i;for(i in ClipMask.call(this,t),this.type="PATH",this.border=!1,this.strokeCol=null,this.fillCol=null,this.lineCap=null,this.iso=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000",this.dashed=[],this.dashOffset=0,s="object"==typeof e?e:{})s.hasOwnProperty(i)&&this.setProperty(i,s[i])}).prototype=Object.create(ClipMask.prototype),Path.prototype.constructor=Path,Path.prototype.setProperty=c,Path.prototype.dup=function(){var t=new Path;return t.type=this.type,t.drawCmds=r(this.drawCmds),t.parent=null,t.dwgOrg=r(this.dwgOrg),t.hardTfmAry=r(this.hardTfmAry),t.ofsTfmAry=r(this.ofsTfmAry),t.border=this.border,t.strokeCol=this.strokeCol,t.fillCol=this.fillCol,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.savScale=1,t.iso=this.iso,t.fillRule=this.fillRule,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t.dashed=r(this.dashed),t.dashOffset=this.dashOffset,t},(Shape=function(t,e){var s=e||{};Path.call(this,t,e),this.type="SHAPE",this.clearFlag=!1,s.hasOwnProperty("iso")?this.setProperty("iso",s.iso):s.hasOwnProperty("isotropic")?this.setProperty("iso",s.isotropic):this.iso=!0}).prototype=Object.create(Path.prototype),Shape.prototype.constructor=Shape,(Img=function(t,e){var s,i;for(i in p.call(this),this.type="IMG",this.setDescriptor=function(t){"string"==typeof t?(this.imgBuf=new Image,this.imgBuf.src=t):t instanceof Image?this.imgBuf=t:t instanceof HTMLCanvasElement?this.imgBuf=t:console.error("Img data type unrecognised")},this.setDescriptor(t),this.drawCmds=[],this.width=0,this.height=0,this.imgWidth=0,this.imgHeight=0,this.imgLorgX=0,this.imgLorgY=0,this.lorg=1,this.border=!1,this.strokeCol=null,this.lineWidthWC=null,this.lineWidth=null,this.lineCap=null,this.savScale=1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000",s="object"==typeof e?e:{})s.hasOwnProperty(i)&&this.setProperty(i,s[i])}).prototype=Object.create(p.prototype),Img.prototype.constructor=Img,Img.prototype.setProperty=c,Img.prototype.dup=function(){var t=new Img(this.imgBuf);return t.type=this.type,t.drawCmds=r(this.drawCmds),t.dwgOrg=r(this.dwgOrg),t.dragNdrop=null,t.hardTfmAry=r(this.hardTfmAry),t.ofsTfmAry=r(this.ofsTfmAry),t.border=this.border,t.strokeCol=this.strokeCol,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.savScale=1,t.iso=this.iso,t.dashed=r(this.dashed),t.dashOffset=this.dashOffset,t.width=this.width,t.height=this.height,t.imgWidth=this.imgWidth,t.imgHeight=this.imgHeight,t.imgLorgX=this.imgLorgX,t.imgLorgY=this.imgLorgY,t.lorg=this.lorg,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t},Img.prototype.formatImg=function(t){var e,s,i,r,a,n,o,h,l,c,p,u,d,f=Math.abs(t.yscl/t.xscl),g=0,y=0;this.iso=!0,this.imgBuf.width||console.log("in image onload handler yet image NOT loaded!"),this.imgWidth&&this.imgHeight?(e=this.imgWidth,s=this.imgHeight*f):this.imgWidth&&!this.imgHeight?s=(e=this.imgWidth)*this.imgBuf.height/this.imgBuf.width:this.imgHeight&&!this.imgWidth?e=(s=this.imgHeight*f)*this.imgBuf.width/this.imgBuf.height:s=(e=this.imgBuf.width)*this.imgBuf.height/this.imgBuf.width,void 0!==(d=[0,[0,0],[i=e/2,0],[e,0],[0,r=s/2],[i,r],[e,r],[0,s],[i,s],[e,s]])[this.lorg]&&(g=-d[this.lorg][0],y=-d[this.lorg][1]),this.imgLorgX=g,this.imgLorgY=y,this.width=e,this.height=s,a=g,n=y,o=g,h=y+s,l=g+e,c=y+s,p=g+e,u=y,this.drawCmds=[{type:"M",values:[a,n]},{type:"L",values:[o,h]},{type:"L",values:[l,c]},{type:"L",values:[p,u]},{type:"Z",values:[]}]},(Text=function(t,e){var s,i;for(i in p.call(this),this.type="TEXT",this.txtStr="",this.drawCmds=[],this.width=0,this.height=0,this.imgLorgX=0,this.imgLorgY=0,this.lorg=1,this.border=!1,this.fillCol=null,this.bgFillColor=null,this.strokeCol=null,this.fontSize=null,this.fontSizeZC=null,this.fontWeight=null,this.fontFamily=null,this.lineWidthWC=null,this.lineWidth=null,this.lineCap=null,this.savScale=1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000",this.setDescriptor=function(t){"string"!=typeof t?console.error("Text data type not a string"):this.txtStr=t},this.setDescriptor(t),s="object"==typeof e?e:{})s.hasOwnProperty(i)&&this.setProperty(i,s[i])}).prototype=Object.create(p.prototype),Text.prototype.constructor=Text,Text.prototype.setProperty=c,Text.prototype.dup=function(){var t=new Text(this.txtStr.slice(0));return t.type=this.type,t.drawCmds=r(this.drawCmds),t.dwgOrg=r(this.dwgOrg),t.hardTfmAry=r(this.hardTfmAry),t.ofsTfmAry=r(this.ofsTfmAry),t.border=this.border,t.strokeCol=this.strokeCol,t.fillCol=this.fillCol,t.bgFillColor=this.bgFillColor,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.savScale=1,t.dashed=r(this.dashed),t.dashOffset=this.dashOffset,t.width=this.width,t.height=this.height,t.imgLorgX=this.imgLorgX,t.imgLorgY=this.imgLorgY,t.lorg=this.lorg,t.fontSize=this.fontSize,t.fontWeight=this.fontWeight,t.fontFamily=this.fontFamily,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t},Text.prototype.formatText=function(t){var e,s,i,r,a,n,o,h,l,c,p,u,d,f,g,y,v=this.fontSize||t.fontSize,m=this.fontFamily||t.fontFamily,x=this.fontWeight||t.fontWeight,C=this.lorg||1,w=0,b=0;this.orgXscl||(this.orgXscl=t.xscl),f=t.xscl/this.orgXscl,this.fontSizeZC=v*f,t.ctx.save(),g=t.ctx,void 0===y?g.setTransform(1,0,0,0,1,0):g.setTransform(y.matrix[0][0],y.matrix[0][1],y.matrix[1][0],y.matrix[1][1],y.matrix[2][0],y.matrix[2][1]),t.ctx.font=x+" "+v+"px "+m,e=t.ctx.measureText(this.txtStr).width,t.ctx.restore(),s=v,void 0!==(a=[0,[0,s*=f],[i=(e*=f)/2,s],[e,s],[0,r=s/2],[i,r],[e,r],[0,0],[i,0],[e,0]])[C]&&(w=-a[C][0],b=a[C][1]),this.imgLorgX=w,this.imgLorgY=b-.25*s,n=w,o=b,h=w,l=b-s,c=w+e,p=b-s,u=w+e,d=b,this.drawCmds=[{type:"M",values:[n,o]},{type:"L",values:[h,l]},{type:"L",values:[c,p]},{type:"L",values:[u,d]},{type:"Z",values:[]}]},d.prototype.stopAnimation=function(){clearTimeout(this.timer),window.cancelAnimationFrame(this.timer),this.prevAnimMode=this.animMode,this.animMode=this.modes.STOPPED,this.currTime=0,this.startOfs=0},d.prototype.pauseAnimation=function(){clearTimeout(this.timer),window.cancelAnimationFrame(this.timer),this.prevAnimMode=this.animMode,this.animMode=this.modes.PAUSED},d.prototype.stepAnimation=function(){var t=this;this.animMode!==this.modes.PLAYING&&(this.animMode===this.modes.PAUSED&&(this.startTime=Date.now()-this.currTime),this.prevAnimMode=this.animMode,this.animMode=this.modes.STEPPING,setTimeout(function(){u(t),t.prevAnimMode=t.modes.PAUSED,t.animMode=t.modes.PAUSED},this.stepTime))},d.prototype.redrawAnimation=function(){this.animMode!==this.modes.PLAYING&&(this.startTime=Date.now()-this.currTime,u(this))},d.prototype.playAnimation=function(t,e){var s=this;this.startOfs=t||0,this.animMode!==this.modes.PLAYING&&(this.animMode===this.modes.PAUSED&&(this.startTime=Date.now()-this.currTime),this.prevAnimMode=this.animMode,this.animMode=this.modes.PLAYING,this.timer=window.requestAnimationFrame(function t(){u(s),s.prevAnimMode=s.modes.PLAYING,e&&s.currTime>=e?s.stopAnimation():s.frameRate?(s.interval=1e3/s.frameRate,s.currTime+=s.interval,timeDiff=Date.now()-s.startTime-s.currTime,s.timer=setTimeout(t,s.interval-timeDiff)):s.timer=window.requestAnimationFrame(t)}))},(Cango=function(e){var r,a,n,o,h,l=this;if("string"==typeof e&&document.getElementById(e)){if(this.cnvs=document.getElementById(e),this.cId=e,!(this.cnvs instanceof HTMLCanvasElement))return void alert("element not a canvas");-1!==this.cId.indexOf("_ovl_")?(this.cgoType="OVL",r=this.cId.slice(0,this.cId.indexOf("_ovl_")),this.bkgCanvas=document.getElementById(r)):(this.cgoType="BKG",this.bkgCanvas=this.cnvs),this.rawWidth=this.cnvs.offsetWidth,this.rawHeight=this.cnvs.offsetHeight}else{if(!(e instanceof HTMLCanvasElement))return void alert("element not a canvas");this.cnvs=e,this.bkgCanvas=this.cnvs,this.rawWidth=this.cnvs.width,this.rawHeight=this.cnvs.height,document.contains(e)?(this.cId=this.cnvs.id,this.cgoType="BKG",this.cId||(this.cId="_bkg_"+i(),this.cnvs.id=this.cId)):(this.cId="_os_"+i(),this.cgoType="OS")}this.aRatio=this.rawWidth/this.rawHeight,this.widthPW=100,this.heightPW=100/this.aRatio,this.bkgCanvas.hasOwnProperty("layers")||(this.bkgCanvas.layers=[],a=new f(this.cId,this.cnvs),this.bkgCanvas.layers[0]=a,"OS"!==this.cgoType&&(n=function(){var t,e,s=l.bkgCanvas.offsetTop+l.bkgCanvas.clientTop,i=l.bkgCanvas.offsetLeft+l.bkgCanvas.clientLeft,r=l.bkgCanvas.offsetWidth,a=l.bkgCanvas.offsetHeight;if(!(Math.abs(r-l.rawWidth)/r<.01&&Math.abs(a-l.rawHeight)/a<.01)&&(l.bkgCanvas.timeline&&l.bkgCanvas.timeline.animTasks.length&&l.deleteAllAnimations(),l.rawWidth=r,l.rawHeight=a,l.aRatio=r/a,l.bkgCanvas===l.cnvs))for(l.cnvs.width=r,l.cnvs.height=a,t=1;t<l.bkgCanvas.layers.length;t++)(e=l.bkgCanvas.layers[t].cElem)&&(e.style.top=s+"px",e.style.left=i+"px",e.style.width=r+"px",e.style.height=a+"px",e.width=r,e.height=a)},o=250,h=void 0,window.addEventListener("resize",function(){null!=h&&(clearTimeout(h),h=void 0),h=setTimeout(function(){h=void 0,n()},o)}))),this.bkgCanvas.hasOwnProperty("timeline")||(this.bkgCanvas.timeline=new d),this.cnvs.hasOwnProperty("resized")||(this.cnvs.width=this.rawWidth,this.cnvs.height=this.rawHeight,this.cnvs.resized=!0),this.ctx=this.cnvs.getContext("2d"),this.yDown=!0,this.vpW=this.rawWidth,this.vpH=this.rawHeight,this.vpOrgX=0,this.vpOrgYsvg=0,this.vpOrgYrhc=this.rawHeight,this.vpOrgY=this.vpOrgYsvg,this.xscl=1,this.yscl=1,this.xoffset=0,this.yoffset=0,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset},this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",this.penCol="rgba(0, 0, 0, 1.0)",this.penWid=1,this.lineCap="butt",this.paintCol="rgba(128,128,128,1.0)",this.fontSize=12,this.fontWeight=400,this.fontFamily="Consolas, Monaco, 'Andale Mono', monospace",this.clipCount=0,l.cnvs.onmousedown=function(e){var i,r,a,n,o,h,c,p=e||window.event;function u(e,i,r){var a,n=e.dragNdrop.cgo,o=n.yDown?n.xscl:-n.xscl,h=t.translate(n.vpOrgX+n.xoffset,n.vpOrgY+n.yoffset).scaleNonUniform(n.xscl,o).multiply(e.netTfm);return"IMG"!==e.type||n.yDown?"TEXT"===e.type&&(h=h.scaleNonUniform(1/n.xscl,1/o)):h=h.flipY(),n.ctx.save(),n.ctx.setTransform(h.a,h.b,h.c,h.d,h.e,h.f),n.ctx.beginPath(),e.drawCmds.forEach(function(t){n.ctx[s[t.type]].apply(n.ctx,t.values)}),a=n.ctx.isPointInPath(i,r),n.ctx.restore(),a}h=p,c=l.cnvs.getBoundingClientRect(),i={x:h.clientX-c.left,y:h.clientY-c.top};t:for(n=l.bkgCanvas.layers.length-1;n>=0;n--)for(o=(a=l.bkgCanvas.layers[n]).dragObjects.length-1;o>=0;o--)if(u(r=a.dragObjects[o],i.x,i.y)&&r.dragNdrop){r.dragNdrop.grab(p);break t}}}).prototype.animation=function(t,e,s,r){var a,n=i();return a=new function(t,e,s,i,r,a){var n;for(n in this.id=t,this.gc=e,this.drawFn=i,this.pathFn=r,this.options=a||{},this.currState={time:0},this.nextState={time:0},this.gc.ctx.save(),"function"==typeof s&&s.call(this,this.options),"function"==typeof this.drawFn?this.drawFn.call(this,this.options):console.log("invalid animation draw function"),this.gc.ctx.restore(),this.nextState)this.nextState.hasOwnProperty(n)&&(this.currState[n]=this.nextState[n])}(this.cId+"_"+n,this,t,e,s,r),this.stopAnimation(),this.bkgCanvas.timeline.animTasks.push(a),a.id},Cango.prototype.pauseAnimation=function(){this.bkgCanvas.timeline.pauseAnimation()},Cango.prototype.playAnimation=function(t,e){this.bkgCanvas.timeline.playAnimation(t,e)},Cango.prototype.stopAnimation=function(){this.bkgCanvas.timeline.stopAnimation()},Cango.prototype.stepAnimation=function(){this.bkgCanvas.timeline.stepAnimation()},Cango.prototype.redrawAnimation=function(){this.bkgCanvas.timeline.redrawAnimation()},Cango.prototype.deleteAnimation=function(t){var e=this;this.pauseAnimation(),this.bkgCanvas.timeline.animTasks.forEach(function(s,i){s.id!==t||e.bkgCanvas.timeline.animTasks.splice(i,1)})},Cango.prototype.deleteAllAnimations=function(){this.stopAnimation(),this.bkgCanvas.timeline.animTasks=[]},Cango.prototype.toPixelCoords=function(t,e){return{x:this.vpOrgX+this.xoffset+t*this.xscl,y:this.vpOrgY+this.yoffset+e*this.yscl}},Cango.prototype.toWorldCoords=function(t,e){return{x:(t-this.vpOrgX-this.xoffset)/this.xscl,y:(e-this.vpOrgY-this.yoffset)/this.yscl}},Cango.prototype.getCursorPosWC=function(t){var e=t||window.event,s=this.cnvs.getBoundingClientRect();return{x:(e.clientX-s.left-this.vpOrgX-this.xoffset)/this.xscl,y:(e.clientY-s.top-this.vpOrgY-this.yoffset)/this.yscl}},Cango.prototype.clearCanvas=function(t){var e,s,i,r,a=this;t?(this.ctx.save(),this.ctx.fillStyle=t instanceof LinearGradient?(e=t,s=a.toPixelCoords(e.grad[0],e.grad[1]),i=a.toPixelCoords(e.grad[2],e.grad[3]),r=a.ctx.createLinearGradient(s.x,s.y,i.x,i.y),e.colorStops.forEach(function(t){r.addColorStop(t[0],t[1])}),r):t instanceof RadialGradient?function(t){var e=a.toPixelCoords(t.grad[0],t.grad[1]),s=t.grad[2]*a.xscl,i=a.toPixelCoords(t.grad[3],t.grad[4]),r=t.grad[5]*a.xscl,n=a.ctx.createRadialGradient(e.x,e.y,s,i.x,i.y,r);return t.colorStops.forEach(function(t){n.addColorStop(t[0],t[1])}),n}(t):t,this.ctx.fillRect(0,0,this.rawWidth,this.rawHeight),this.ctx.restore()):this.ctx.clearRect(0,0,this.rawWidth,this.rawHeight),g(this).dragObjects.length=0,this.cnvs.alphaOvl&&this.cnvs.alphaOvl.parentNode&&this.cnvs.alphaOvl.parentNode.removeChild(this.cnvs.alphaOvl)},Cango.prototype.gridboxPadding=function(t,e,s,i){var r,a,n=this;function o(){n.vpW=n.rawWidth,n.vpH=n.rawHeight,n.vpOrgX=0,n.vpOrgY=0,n.setWorldCoordsSVG()}if(void 0!==t){if(void 0===e){if(t>=50||t<0)return console.error("gridbox right must be greater than left"),void o();e=t}if((t<0||t>99)&&(t=0),(e<0||e>99/this.aRatio)&&(e=0),void 0===s?s=t:s<0&&(s=0),void 0===i?i=e:i<0&&(i=0),r=100-t-s,a=100/this.aRatio-i-e,r<0||a<0)return console.error("invalid gridbox dimensions"),void o();this.vpW=r*this.rawWidth/100,this.vpH=a*this.rawWidth/100,this.vpOrgX=t*this.rawWidth/100,this.vpOrgYsvg=i*this.rawWidth/100,this.vpOrgYrhc=this.vpOrgYsvg+this.vpH,this.vpOrgY=this.vpOrgYsvg,this.yDown=!0,this.setWorldCoordsSVG()}else o()},Cango.prototype.fillGridbox=function(t){var e,s,i,r,a=this,n=t||this.paintCol,o=this.vpOrgYsvg;this.ctx.save(),this.ctx.fillStyle=n instanceof LinearGradient?(e=n,s=a.toPixelCoords(e.grad[0],e.grad[1]),i=a.toPixelCoords(e.grad[2],e.grad[3]),r=a.ctx.createLinearGradient(s.x,s.y,i.x,i.y),e.colorStops.forEach(function(t){r.addColorStop(t[0],t[1])}),r):n instanceof RadialGradient?function(t){var e=a.toPixelCoords(t.grad[0],t.grad[1]),s=t.grad[2]*a.xscl,i=a.toPixelCoords(t.grad[3],t.grad[4]),r=t.grad[5]*a.xscl,n=a.ctx.createRadialGradient(e.x,e.y,s,i.x,i.y,r);return t.colorStops.forEach(function(t){n.addColorStop(t[0],t[1])}),n}(n):n,this.ctx.fillRect(this.vpOrgX,o,this.vpW,this.vpH),this.ctx.restore()},Cango.prototype.setWorldCoordsSVG=function(t,e,s,i){var r=t||0,a=e||0;this.yDown=!0,this.vpOrgY=this.vpOrgYsvg,this.xscl=s&&s>0?this.vpW/s:1,this.yscl=i&&i>0?this.vpH/i:this.xscl,this.xoffset=-r*this.xscl,this.yoffset=-a*this.yscl,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset}},Cango.prototype.setWorldCoordsRHC=function(t,e,s,i){var r=t||0,a=e||0;this.yDown=!1,this.vpOrgY=this.vpOrgYrhc,this.xscl=s&&s>0?this.vpW/s:1,this.yscl=i&&i>0?-this.vpH/i:-this.xscl,this.xoffset=-r*this.xscl,this.yoffset=-a*this.yscl,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset}},Cango.prototype.setPropertyDefault=function(t,e){if("string"==typeof t&&null!=e)switch(t.toLowerCase()){case"fillcolor":"string"!=typeof e&&"object"!=typeof e||(this.paintCol=e);break;case"strokecolor":"string"!=typeof e&&"object"!=typeof e||(this.penCol=e);break;case"linewidth":case"strokewidth":this.penWid=e;break;case"linecap":"string"!=typeof e||"butt"!==e&&"round"!==e&&"square"!==e||(this.lineCap=e);break;case"fontfamily":"string"==typeof e&&(this.fontFamily=e);break;case"fontsize":this.fontSize=e;break;case"fontweight":("string"==typeof e||e>=100&&e<=900)&&(this.fontWeight=e);break;case"steptime":e>=15&&e<=500&&(this.bkgCanvas.timeline.stepTime=e);break;case"framerate":e&&"auto"===e?this.bkgCanvas.timeline.frameRate=void 0:isNaN(e)||e>50||e<=.5?console.error('invalid frame rate ["auto" or value 0.5 .. 50 lines/sec]'):this.bkgCanvas.timeline.frameRate=e;break;default:return}},Cango.prototype.dropShadow=function(t){var e=0,s=0,i=0,r="#000000",a=1,n=1;null!=t&&(e=t.shadowOffsetX||0,s=t.shadowOffsetY||0,i=t.shadowBlur||0,r=t.shadowColor||"#000000","SHAPE"===t.type||"PATH"===t.type&&!t.iso?(a*=this.xscl,n*=this.yscl):(a*=this.xscl,n*=-this.xscl)),this.ctx.shadowOffsetX=e*a,this.ctx.shadowOffsetY=s*n,this.ctx.shadowBlur=i*a,this.ctx.shadowColor=r},Cango.prototype.render=function(t,e){var s,i=this,r=Math.abs(i.yscl/i.xscl),a=Math.PI/180,n=180/Math.PI;function c(t){var e;t.iso||(e=new l("SCL",1,r),t.netTfmAry.unshift(e)),o(t.ofsTfm),t.savScale=1,t.netTfmAry.forEach(function(e){var s,i;"SCL"===e.type&&(t.savScale*=Math.abs(e.args[0])),"TRN"===e.type&&t.iso?h[e.type].call(t,[e.args[0],e.args[1]*r]):"SKW"===e.type?t.iso?h[e.type].call(t,[e.args[0],e.args[1]]):(s=Math.atan(Math.tan(e.args[0]*a)*r)/a,i=Math.atan(Math.tan(e.args[1]*a)/r)/a,h[e.type].call(t,[s,i])):h[e.type].call(t,e.args)}),t.netTfm=t.ofsTfm.multiply(t.grpTfm)}function p(t){var e,s,i;t.parent?(e=t.parent.netTfmAry,s=t.parent.netTfm):(e=[],s=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),i=e.concat(t.ofsTfmAry),"GRP"===t.type?t.netTfmAry=i:(t.netTfmAry=i.concat(t.hardTfmAry),t.grpTfm=s,t.dwgOrg={x:0,y:0},i.reverse().forEach(function(e){var s,i;"TRN"===e.type&&t.iso&&"IMG"!==t.type&&"TEXT"!==t.type?t.dwgOrg=h[e.type].call(t.dwgOrg,[e.args[0],e.args[1]*r]):"SKW"!==e.type||t.iso?t.dwgOrg=h[e.type].call(t.dwgOrg,e.args):(s=n*Math.atan(Math.tan(e.args[0]*a)*r),i=n*Math.atan(Math.tan(e.args[1]*a)/r),t.dwgOrg=h[e.type].call(t.dwgOrg,[s,i,r]))}))}function u(t){function e(){t.formatImg(i),c(t),i.paintImg(t)}"IMG"===t.type?t.imgBuf.complete||t.imgBuf instanceof HTMLCanvasElement?e():t.imgBuf.addEventListener("load",e):"TEXT"===t.type?(t.formatText(i),c(t),i.paintText(t)):"CLIP"===t.type?(c(t),i.applyClipMask(t)):(c(t),i.paintPath(t))}"string"==typeof t.type?(!0===e&&this.clearCanvas(),"GRP"===t.type?(s=[],function t(e,i){e(i),"GRP"===i.type?i.children.forEach(function(s){t(e,s)}):s.push(i)}(p,t),s.forEach(u)):(p(t),u(t)),function t(e){e.transformReset(),"GRP"===e.type&&e.children.forEach(function(e){t(e)})}(t),this.resetClip()):console.log("render called on bad object type")},Cango.prototype.genLinGrad=function(t,e){var s=t.grad[0],i=t.grad[1],r=t.grad[2],a=t.grad[3],o=n(s,i,e),h=n(r,a,e),l=this.ctx.createLinearGradient(o.x,o.y,h.x,h.y);return t.colorStops.forEach(function(t){l.addColorStop(t[0],t[1])}),l},Cango.prototype.genRadGrad=function(t,e,s){var i=t.grad[0],r=t.grad[1],a=t.grad[2]*s,o=t.grad[3],h=t.grad[4],l=t.grad[5]*s,c=n(i,r,e),p=n(o,h,e),u=this.ctx.createRadialGradient(c.x,c.y,a,p.x,p.y,l);return t.colorStops.forEach(function(t){u.addColorStop(t[0],t[1])}),u},Cango.prototype.paintImg=function(e){var i,r,a,n,o=this,h=e.imgBuf,l=this.yDown?this.xscl:-this.xscl,c=t.translate(this.vpOrgX+this.xoffset,this.vpOrgY+this.yoffset).scaleNonUniform(this.xscl,l).multiply(e.netTfm);this.yDown||(c=c.flipY()),this.ctx.save(),this.ctx.setTransform(c.a,c.b,c.c,c.d,c.e,c.f),this.dropShadow(e),this.ctx.drawImage(h,e.imgLorgX,e.imgLorgY,e.width,e.height),e.border&&(this.ctx.beginPath(),e.drawCmds.forEach(function(t){o.ctx[s[t.type]].apply(o.ctx,t.values)}),this.ctx.restore(),this.ctx.save(),n=(a=e.strokeCol||this.penCol)instanceof LinearGradient?this.genLinGrad(a,c):a instanceof RadialGradient?this.genRadGrad(a,c,e.savScale*this.xscl):a,e.lineWidthWC?this.ctx.lineWidth=e.lineWidthWC*e.savScale*this.xscl:this.ctx.lineWidth=e.lineWidth||this.penWid,this.ctx.strokeStyle=n,this.ctx.lineCap=e.lineCap||this.lineCap,this.ctx.stroke()),this.ctx.restore(),null!==e.dragNdrop&&((i=g(this))!==e.dragNdrop.layer&&e.dragNdrop.layer&&-1!==(r=e.dragNdrop.layer.dragObjects.indexOf(this))&&e.dragNdrop.layer.dragObjects.splice(r,1),e.dragNdrop.cgo=this,e.dragNdrop.layer=i,e.dragNdrop.layer.dragObjects.includes(e)||e.dragNdrop.layer.dragObjects.push(e))},Cango.prototype.paintPath=function(e){var i,r,a,n,o,h=this,l=this.yDown?this.xscl:-this.xscl,c=t.translate(this.vpOrgX+this.xoffset,this.vpOrgY+this.yoffset).scaleNonUniform(this.xscl,l).multiply(e.netTfm);this.ctx.save(),this.ctx.transform(c.a,c.b,c.c,c.d,c.e,c.f),this.ctx.beginPath(),e.drawCmds.forEach(function(t){h.ctx[s[t.type]].apply(h.ctx,t.values)}),this.ctx.restore(),this.ctx.save(),r=(i=e.fillCol||this.paintCol)instanceof LinearGradient?this.genLinGrad(i,c):i instanceof RadialGradient?this.genRadGrad(i,c,e.savScale*this.xscl):i,a=(i=e.strokeCol||this.penCol)instanceof LinearGradient?this.genLinGrad(i,c):i instanceof RadialGradient?this.genRadGrad(i,c,e.savScale*this.xscl):i,this.dropShadow(e),"SHAPE"===e.type&&(this.ctx.fillStyle=r,e.clearFlag?(this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.fill(e.fillRule),this.ctx.restore()):this.ctx.fill(e.fillRule)),("PATH"===e.type||e.border)&&(e.border&&this.dropShadow(),Array.isArray(e.dashed)&&e.dashed.length&&(this.ctx.setLineDash(e.dashed),this.ctx.lineDashOffset=e.dashOffset||0),e.lineWidthWC?this.ctx.lineWidth=e.lineWidthWC*e.savScale*this.xscl:this.ctx.lineWidth=e.lineWidth||this.penWid,this.ctx.strokeStyle=a,this.ctx.lineCap=e.lineCap||this.lineCap,this.ctx.stroke(),this.ctx.setLineDash([]),this.ctx.lineDashOffset=0),this.ctx.restore(),null!==e.dragNdrop&&((n=g(this))!==e.dragNdrop.layer&&e.dragNdrop.layer&&-1!==(o=e.dragNdrop.layer.dragObjects.indexOf(this))&&e.dragNdrop.layer.dragObjects.splice(o,1),e.dragNdrop.cgo=this,e.dragNdrop.layer=n,e.dragNdrop.layer.dragObjects.includes(e)||e.dragNdrop.layer.dragObjects.push(e))},Cango.prototype.applyClipMask=function(e){if(e.drawCmds.length){var i=this,r=this.yDown?this.xscl:-this.xscl,a=t.translate(this.vpOrgX+this.xoffset,this.vpOrgY+this.yoffset).scaleNonUniform(this.xscl,r).multiply(e.netTfm);this.ctx.save(),this.clipCount+=1,this.ctx.save(),this.ctx.transform(a.a,a.b,a.c,a.d,a.e,a.f),this.ctx.beginPath(),e.drawCmds.forEach(function(t){i.ctx[s[t.type]].apply(i.ctx,t.values)}),this.ctx.closePath(),this.ctx.restore(),this.ctx.clip(e.fillRule),this.ctx.fillStyle="rgba(0, 0, 0, 0.0)",this.ctx.fillRect(0,0,1,1)}else this.resetClip()},Cango.prototype.resetClip=function(){for(;this.clipCount>0;)this.ctx.restore(),this.clipCount--},Cango.prototype.paintText=function(e){var i,r,a,n,o,h=this,l=this.yDown?this.xscl:-this.xscl,c=t.translate(this.vpOrgX+this.xoffset,this.vpOrgY+this.yoffset).scaleNonUniform(this.xscl,l).multiply(e.netTfm).scaleNonUniform(1/this.xscl,1/l);i=e.fontWeight||this.fontWeight,r=e.fontSizeZC,a=e.fontFamily||this.fontFamily,this.ctx.save(),this.ctx.setTransform(c.a,c.b,c.c,c.d,c.e,c.f),"string"==typeof e.bgFillColor&&(this.ctx.save(),this.ctx.fillStyle=e.bgFillColor,this.ctx.strokeStyle=e.bgFillColor,this.ctx.lineWidth=.1*r,this.ctx.beginPath(),e.drawCmds.forEach(function(t){h.ctx[s[t.type]].apply(h.ctx,t.values)}),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()),this.ctx.font=i+" "+r+"px "+a,this.ctx.fillStyle=e.fillCol||this.paintCol,this.ctx.fillText(e.txtStr,e.imgLorgX,e.imgLorgY),e.border&&(this.dropShadow(),e.lineWidthWC?this.ctx.lineWidth=e.lineWidthWC*this.xscl:this.ctx.lineWidth=e.lineWidth||this.penWid,this.ctx.strokeStyle=e.strokeCol||this.penCol,this.ctx.lineCap=e.lineCap||this.lineCap,this.ctx.strokeText(e.txtStr,e.imgLorgX,e.imgLorgY)),this.ctx.restore(),null!==e.dragNdrop&&((n=g(this))!==e.dragNdrop.layer&&e.dragNdrop.layer&&-1!==(o=e.dragNdrop.layer.dragObjects.indexOf(this))&&e.dragNdrop.layer.dragObjects.splice(o,1),e.dragNdrop.cgo=this,e.dragNdrop.layer=n,e.dragNdrop.layer.dragObjects.includes(e)||e.dragNdrop.layer.dragObjects.push(e))},Cango.prototype.drawPath=function(t,e){var s=new Path(t,e);this.render(s)},Cango.prototype.drawShape=function(t,e){var s=new Shape(t,e);this.render(s)},Cango.prototype.drawText=function(t,e){var s=new Text(t,e);this.render(s)},Cango.prototype.drawImg=function(t,e){var s=new Img(t,e);this.render(s)},Cango.prototype.clearShape=function(t,e){var s=new Shape(t,e);s.fillCol="rgba(0,0,0,1.0)",s.clearFlag=!0,this.render(s)},Cango.prototype.createLayer=function(){var t,e,s,r,a=this.rawWidth,n=this.rawHeight,o=i(),h=this.bkgCanvas.layers.length;return"OVL"===this.cgoType||"OS"===this.cgoType?(console.log("offscreen canvases and layers cannot create layers"),""):(t="<canvas id='"+(s=this.cId+"_ovl_"+o)+"' style='position:absolute' width='"+a+"' height='"+n+"'></canvas>",this.bkgCanvas.layers[h-1].cElem.insertAdjacentHTML("afterend",t),(e=document.getElementById(s)).style.backgroundColor="transparent",e.style.left=this.bkgCanvas.offsetLeft+this.bkgCanvas.clientLeft+"px",e.style.top=this.bkgCanvas.offsetTop+this.bkgCanvas.clientTop+"px",e.style.width=this.bkgCanvas.offsetWidth+"px",e.style.height=this.bkgCanvas.offsetHeight+"px",r=new f(s,e),this.bkgCanvas.layers.push(r),s)},Cango.prototype.deleteLayer=function(t){var e,s;for(s=1;s<this.bkgCanvas.layers.length;s++)this.bkgCanvas.layers[s].id===t&&((e=this.bkgCanvas.layers[s].cElem)&&(e.alphaOvl&&e.alphaOvl.parentNode&&e.alphaOvl.parentNode.removeChild(e.alphaOvl),e.parentNode.removeChild(e)),this.bkgCanvas.layers.splice(s,1))},Cango.prototype.deleteAllLayers=function(){var t,e;for(t=this.bkgCanvas.layers.length-1;t>0;t--)(e=this.bkgCanvas.layers[t].cElem)&&(e.alphaOvl&&e.alphaOvl.parentNode&&e.alphaOvl.parentNode.removeChild(e.alphaOvl),e.parentNode.removeChild(e)),this.bkgCanvas.layers.splice(t,1)},Cango.prototype.dupCtx=function(t){this.yDown=t.yDown,this.vpW=t.vpW,this.vpH=t.vpH,this.vpOrgYsvg=t.vpOrgYsvg,this.vpOrgYrhc=t.vpOrgYrhc,this.vpOrgX=t.vpOrgX,this.vpOrgY=t.vpOrgY,this.xscl=t.xscl,this.yscl=t.yscl,this.xoffset=t.xoffset,this.yoffset=t.yoffset,this.savWC=r(t.savWC),this.penCol=t.penCol.slice(0),this.penWid=t.penWid,this.lineCap=t.lineCap.slice(0),this.paintCol=t.paintCol.slice(0),this.fontSize=t.fontSize,this.fontWeight=t.fontWeight,this.fontFamily=t.fontFamily.slice(0)},initZoomPan=function(t,e,s){var i,r,a,n,o,h,l,c,p,u;function d(t){u.forEach(function(e){var s=e.toPixelCoords(0,0),i=e.rawWidth/2-s.x,r=e.rawHeight/2-s.y;e.xoffset+=i-i/t,e.yoffset+=r-r/t,e.xscl/=t,e.yscl/=t}),s()}function f(t,e){u.forEach(function(s){s.xoffset-=t,s.yoffset-=e}),s()}(p=new Cango(t)).clearCanvas(),p.setWorldCoordsRHC(44-p.rawWidth,44-p.rawHeight),p.drawShape(rectangle(114,80),{x:-17,y:0,fillColor:"rgba(0, 50, 0, 0.12)"}),(n=new Shape(rectangle(20,20,2),{fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){u.forEach(function(t){t.xscl=t.savWC.xscl,t.yscl=t.savWC.yscl,t.xoffset=t.savWC.xoffset,t.yoffset=t.savWC.yoffset}),s()}),p.render(n),(c=new Shape(rectangle(20,20,2),{x:22,y:0,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){f(50,0)}),p.render(c),(o=new Shape(rectangle(20,20,2),{x:0,y:22,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){f(0,-50)}),p.render(o),(l=new Shape(rectangle(20,20,2),{x:-22,y:0,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){f(-50,0)}),p.render(l),(h=new Shape(rectangle(20,20,2),{x:0,y:-22,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){f(0,50)}),p.render(h),(r=new Shape(rectangle(20,20,2),{x:-56,y:11,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){d(1/1.2)}),p.render(r),(a=new Shape(rectangle(20,20,2),{x:-56,y:-11,fillColor:"rgba(0,0,0,0.2)"})).enableDrag(null,null,function(){d(1.2)}),p.render(a),i=["m",-7,-2,"l",7,5,7,-5],p.drawPath(i,{x:0,y:22,strokeColor:"white",lineWidth:2}),p.drawPath(i,{x:22,y:0,strokeColor:"white",lineWidth:2,degs:-90}),p.drawPath(i,{x:-22,y:0,strokeColor:"white",lineWidth:2,degs:90}),p.drawPath(i,{x:0,y:-22,strokeColor:"white",lineWidth:2,degs:180}),p.drawPath(["m",-7,0,"l",14,0,"m",-7,-7,"l",0,14],{x:-56,y:11,strokeColor:"white",lineWidth:2}),p.drawPath(["m",-7,0,"l",14,0],{x:-56,y:-11,strokeColor:"white",lineWidth:2}),p.drawPath(["m",-6,-6,"l",12,12,"m",0,-12,"l",-12,12],{strokeColor:"white",lineWidth:2}),u=Array.isArray(e)?e:[e]}}();