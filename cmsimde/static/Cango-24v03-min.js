var Cango,circle,arc,ellipse,square,rectangle,triangle,cross,ex,Path,Shape,Img,Text,ClipMask,Group,ImageSegment,LinearGradient,RadialGradient,initZoomPan;!function(){"use strict";const t=["GRP","PATH","SHAPE","IMG","TEXT","CLIP"];function s(t){return JSON.parse(JSON.stringify(t))}function i(){this.p2dWC=null,this.p2dPX=null,this.length=0}function e(t,s,i,e){t.ctx.save(),s.pthCmds.p2dPX=new Path2D,s.pthCmds.p2dPX.addPath(s.pthCmds.p2dWC,s.netTfm);const h=t.ctx.isPointInPath(s.pthCmds.p2dPX,i,e);return t.ctx.restore(),h}function h(t){const s=t.bkgCanvas.layers.length,i=t.bkgCanvas.layers[s-1].cElem;i.onmousedown=(h=>{!function(h){const r=t.cnvs.getBoundingClientRect(),o=h.clientX-r.left,n=h.clientY-r.top;t:for(let r=s-1;r>=0;r--){let s=t.bkgCanvas.layers[r];for(let r=s.dragObjects.length-1;r>=0;r--){let a=s.dragObjects[r];if(e(t,a,o,n)&&a.dragNdrop){a.dragNdrop.parent=a,a.dragNdrop.topCvs=i,a.dragNdrop.grab(h);break t}}}}(h)})}circle=function(t=1){return["m",-.5*t,0,"c",0,-.27614*t,.22386*t,-.5*t,.5*t,-.5*t,"c",.27614*t,0,.5*t,.22386*t,.5*t,.5*t,"c",0,.27614*t,-.22386*t,.5*t,-.5*t,.5*t,"c",-.27614*t,0,-.5*t,-.22386*t,-.5*t,-.5*t,"z"]},arc=function(t,s,i){const e=(i%=360)>(s%=360)?1:0,h=Math.abs(i-s)>180?1:0,r=Math.PI*s/180,o=Math.PI*i/180;return["M",t*Math.cos(r),t*Math.sin(r),"A",t,t,0,h,e,t*Math.cos(o),t*Math.sin(o)]},ellipse=function(t,s){const i=t||1,e=s||i;return["m",-.5*i,0,"c",0,-.27614*e,.22386*i,-.5*e,.5*i,-.5*e,"c",.27614*i,0,.5*i,.22386*e,.5*i,.5*e,"c",0,.27614*e,-.22386*i,.5*e,-.5*i,.5*e,"c",-.27614*i,0,-.5*i,-.22386*e,-.5*i,-.5*e,"z"]},square=function(t=1){return["m",.5*t,-.5*t,"l",0,t,-t,0,0,-t,"z"]},rectangle=function(t,s,i=0){const e=t||1,h=s||e;if(i>0){const t=Math.min(e/2,h/2,i);return["m",-e/2+t,-h/2,"l",e-2*t,0,"a",t,t,0,0,1,t,t,"l",0,h-2*t,"a",t,t,0,0,1,-t,t,"l",2*t-e,0,"a",t,t,0,0,1,-t,-t,"l",0,2*t-h,"a",t,t,0,0,1,t,-t,"z"]}return["m",-e/2,-h/2,"l",e,0,0,h,-e,0,"z"]},triangle=function(t=1){return["m",.5*t,-.289*t,"l",-.5*t,.866*t,-.5*t,-.866*t,"z"]},cross=function(t=1){return["m",-.5*t,0,"l",t,0,"m",-.5*t,-.5*t,"l",0,t]},ex=function(t=1){return["m",-.3535*t,-.3535*t,"l",.707*t,.707*t,"m",-.707*t,0,"l",.707*t,-.707*t]};class r{constructor(t,s,i,e){this.dndType=t,this.cgo=null,this.layer=null,this.target=null,this.topCvs=null,this.grabCallback=s||null,this.dragCallback=i||null,this.dropCallback=e||null,this.clickCallback=s||null,this.grabCsrPos={x:0,y:0},this.grabDwgOrg={x:0,y:0},this.grabOfs={x:0,y:0}}mouseupHandler(t){const s=this.cgo.getCursorPosWC(t);if(this.topCvs.onmouseup=null,this.topCvs.onmouseout=null,this.topCvs.onmousemove=null,"click"===this.dndType){const s=this.cgo.cnvs.getBoundingClientRect(),i=t.clientX-s.left,h=t.clientY-s.top;if(!e(this.cgo,this.target,i,h))return}this.dropCallback&&this.dropCallback(s)}grab(t){const s=this.cgo.bkgCanvas.layers.length;this.topCvs=this.cgo.bkgCanvas.layers[s-1].cElem,this.topCvs.onmouseup=(t=>{this.mouseupHandler(t)}),this.topCvs.onmouseout=(t=>{this.drop(t)});const i=this.cgo.getCursorPosWC(t);return this.grabCsrPos.x=i.x,this.grabCsrPos.y=i.y,this.grabDwgOrg.x=this.target.dwgOrg.x,this.grabDwgOrg.y=this.target.dwgOrg.y,this.target.parent?(this.grabOfs.x=i.x-this.grabDwgOrg.x+this.target.parent.dwgOrg.x,this.grabOfs.y=i.y-this.grabDwgOrg.y+this.target.parent.dwgOrg.y):(this.grabOfs.x=i.x-this.grabDwgOrg.x,this.grabOfs.y=i.y-this.grabDwgOrg.y),this.grabCallback&&this.grabCallback(i),this.topCvs.onmousemove=(t=>{this.drag(t)}),t.preventDefault(),!1}drag(t){if(this.dragCallback){const s=this.cgo.getCursorPosWC(t);this.dragCallback(s)}}drop(t){if(this.topCvs.onmouseup=null,this.topCvs.onmouseout=null,this.topCvs.onmousemove=null,this.dropCallback){const s=this.cgo.getCursorPosWC(t);this.dropCallback(s)}}}function o(t,s,i=!0){if("TRN"===s.type)t.x+=s.args[0],t.y+=s.args[1];else if("SCL"===s.type)t.x*=s.args[0],t.y*=s.args[1];else if("ROT"===s.type){const i=s.args[0]||0,e=Math.PI/180,h=Math.sin(-i*e),r=Math.cos(-i*e),o=t.x,n=t.y;t.x=o*r+n*h,t.y=-o*h+n*r}else if("SKW"===s.type){const e=i?1:nonIsoScl,h=s.args[0],r=s.args[1],o=Math.PI/180,n=Math.tan(-h*o)/e,a=Math.tan(r*o)*e,l=t.x,c=t.y;t.x=l+c*n,t.y=l*a+c}}LinearGradient=class{constructor(t,s,i,e){this.grad={x1:t,y1:s,x2:i,y2:e},this.colorStops=[]}addColorStop(t,s){this.colorStops.push({stop:t,color:s})}},RadialGradient=class{constructor(t,s,i,e,h,r){this.grad={x1:t,y1:s,r1:i,x2:e,y2:h,r2:r},this.colorStops=[]}addColorStop(t,s){this.colorStops.push({stop:t,color:s})}};class n{constructor(t,...s){this.type=t,this.args=s}}function a(t,s){const i=[1,2,3,4,5,6,7,8,9];if("string"==typeof t&&void 0!==s)switch(t.toLowerCase()){case"fillrule":if("string"!=typeof s)return;"evenodd"!==s&&"nonzero"!==s||(this.fillRule=s);break;case"fillcolor":this.fillCol=s;break;case"strokecolor":this.strokeCol=s;break;case"linewidth":case"strokewidth":"number"==typeof s&&s>0&&(this.lineWidth=s);break;case"linewidthwc":"number"==typeof s&&s>0&&(this.lineWidthWC=s);break;case"linecap":if("string"!=typeof s)return;"butt"!==s&&"round"!==s&&"square"!==s||(this.lineCap=s);break;case"linejoin":if("string"!=typeof s)return;"bevel"!==s&&"round"!==s&&"miter"!==s||(this.lineJoin=s);break;case"iso":case"isotropic":this.iso=1==s||"iso"===s||"isotropic"===s;break;case"dashed":Array.isArray(s)&&s[0]?this.dashed=s:this.dashed=[];break;case"dashoffset":this.dashOffset=s||0;break;case"border":!0===s&&(this.border=!0),!1===s&&(this.border=!1);break;case"fontsize":"number"==typeof s&&s>0&&(this.fontSize=s);break;case"fontweight":("string"==typeof s||"number"==typeof s&&s>=100&&s<=900)&&(this.fontWeight=s);break;case"fontfamily":"string"==typeof s&&(this.fontFamily=s);break;case"bgfillcolor":this.bgFillColor=s;break;case"imgwidth":this.imgWidth=Math.abs(s);break;case"imgheight":this.imgHeight=Math.abs(s);break;case"lorg":-1!==i.indexOf(s)&&(this.lorg=s);break;case"shadowoffsetx":this.shadowOffsetX=s||0;break;case"shadowoffsety":this.shadowOffsetY=s||0;break;case"shadowblur":this.shadowBlur=s||0;break;case"shadowcolor":this.shadowColor=s;break;case"x":const e=new n("TRN",s,0);this.hardTfmAry.push(e);break;case"y":const h=new n("TRN",0,s);this.hardTfmAry.push(h);break;case"rot":case"degs":const r=new n("ROT",s);this.hardTfmAry.push(r);break;case"scl":const o=0!=s?s:.001,a=new n("SCL",o,o);this.hardTfmAry.push(a);break;case"sclx":const l=new n("SCL",0!=s?s:.001,1);this.hardTfmAry.push(l);break;case"scly":const c=new n("SCL",1,0!=s?s:.001);this.hardTfmAry.push(c);break;case"skewx":const d=new n("SKW",s,0);this.hardTfmAry.push(d);break;case"skewy":const f=new n("SKW",0,s);this.hardTfmAry.push(f)}}Group=class{constructor(...t){this.type="GRP",this.parent=null,this.children=[],this.dwgOrg={x:0,y:0},this.ofsTfmAry=[],this.netTfmAry=[],this.dragNdropHandlers=null,this.addObj(t)}setProperty(t,s){const i=e=>{e.children.forEach(e=>{"GRP"===e.type?i(e):e.setProperty(t,s)})};i(this)}deleteObj(t){const s=this.children.indexOf(t);s>=0&&(this.children.splice(s,1),t.parent=null)}addObj(...s){const i=s=>{s.forEach(s=>{if(Array.isArray(s))i(s);else{if(!s||!t.includes(s.type))return void console.warn("Type Error: Group.addObj: argument",s);s.parent=this,this.children.push(s),!s.dragNdrop&&this.dragNdropHandlers&&(s.enableDrag.apply(s,this.dragNdropHandlers),s.dragNdrop.target=this)}})};i(s)}enableDrag(t,s,i){const e=h=>{h.children.forEach(h=>{"GRP"===h.type?e(h):null===h.dragNdrop&&(h.enableDrag(t,s,i),h.dragNdrop.target=this)})};this.dragNdropHandlers=arguments,e(this)}disableDrag(){const t=s=>{s.children.forEach(s=>{"GRP"===s.type?t(s):s.disableDrag()})};this.dragNdropHandlers=null,t(this)}enableClick(t){const s=i=>{i.children.forEach(i=>{"GRP"===i.type?s(i):null===i.dragNdrop&&(i.enableClick(t),i.dragNdrop.target=this)})};this.dragNdropHandlers=arguments,s(this)}disableClick(){const t=s=>{s.children.forEach(s=>{"GRP"===s.type?t(s):s.disableClick()})};this.dragNdropHandlers=null,t(this)}translate(t=0,s=0){const i=new n("TRN",t,s);this.ofsTfmAry.push(i)}scale(t,s){const i=t||.001,e=new n("SCL",i,s||i);this.ofsTfmAry.push(e)}rotate(t=0){const s=new n("ROT",t);this.ofsTfmAry.push(s)}skew(t=0,s=0){const i=new n("SKW",t,s);this.ofsTfmAry.push(i)}};class l{constructor(){this.iso=!0,this.parent=null,this.dwgOrg={x:0,y:0},this.hardTfmAry=[],this.ofsTfmAry=[],this.netTfmAry=[],this.netTfm=new DOMMatrix,this.dragNdrop=null}enableDrag(t,s,i){this.dragNdrop=new r("drag",t,s,i),this.dragNdrop.target=this}disableDrag(){if(!this.dragNdrop)return;const t=this.dragNdrop.layer.dragObjects.indexOf(this);this.dragNdrop.layer.dragObjects.splice(t,1),this.dragNdrop=null}enableClick(t){this.dragNdrop=new r("click",null,null,t),this.dragNdrop.target=this}disableClick(){disableDrag()}translate(t=0,s=0){const i=new n("TRN",t,s);this.ofsTfmAry.push(i)}scale(t,s){const i=t||.001,e=new n("SCL",i,s||i);this.ofsTfmAry.push(e)}rotate(t=0){const s=new n("ROT",t);this.ofsTfmAry.push(s)}skew(t=0,s=0){const i=new n("SKW",t,s);this.ofsTfmAry.push(i)}}ClipMask=class extends l{constructor(t,s={}){super(),this.type="CLIP",this.pthCmds=new i,this.fillRule="nonzero",this.fillCol=null,this.border=!1,this.strokeCol=null,this.lineWidth=null,this.lineWidthWC=null,this.lineCap=null,this.lineJoin=null,this.savScale=1,this.iso=!1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000",this.dashed=[],this.dashOffset=0,this.setDescriptor(t);for(let t in s)s.hasOwnProperty(t)&&this.setProperty(t,s[t])}setDescriptor(t){if("undefined"!=typeof SVGsegs&&t instanceof SVGsegs){const s=t.toString(5);this.pthCmds.p2dWC=new Path2D(s),this.pthCmds.length=s.length}else if(t instanceof Path2D)this.pthCmds.p2dWC=t,this.pthCmds.length=1;else if("string"==typeof t&&t.length){const s=t.replace(/\,/g," ");this.pthCmds.p2dWC=new Path2D(s),this.pthCmds.length=s.length}else if(t&&t.length&&(ArrayBuffer.isView(t)&&(t=Array.from(t)),Array.isArray(t))){let s="";"number"==typeof t[0]?(s="M "+t.join(" "),this.pthCmds.p2dWC=new Path2D(s)):(s=t.join(" "),this.pthCmds.p2dWC=new Path2D(s)),this.pthCmds.length=s.length}}setProperty(...t){a.apply(this,t)}getProperty(t){return function(t){if("string"==typeof t)switch(t.toLowerCase()){case"fillrule":return this.fillRule;case"fillcolor":return this.fillCol;case"strokecolor":return this.strokeCol;case"linewidth":case"strokewidth":return this.lineWidth;case"linewidthwc":return this.lineWidthWC;case"linecap":return this.lineCap;case"linejoin":return this.lineJoin;case"iso":case"isotropic":return this.iso;case"dashed":return this.dashed;case"dashoffset":return this.dashOffset;case"border":return this.border;case"fontsize":return this.fontSize;case"fontweight":return this.fontWeight;case"fontfamily":return this.fontFamily;case"bgfillcolor":return this.bgFillColor;case"imgwidth":return this.imgWidth;case"imgheight":return this.imgHeight;case"lorg":return this.lorg;case"shadowoffsetx":return this.shadowOffsetX;case"shadowoffsety":return this.shadowOffsetY;case"shadowblur":return this.shadowBlur;case"shadowcolor":return this.shadowColor;default:return}}.call(this,t)}dup(){const t=new ClipMask;return t.type=this.type,this.pthCmds.p2dWC&&(t.pthCmds.p2dWC=new Path2D(this.pthCmds.p2dWC),t.pthCmds.length=this.pthCmds.length),t.parent=null,t.dwgOrg=s(this.dwgOrg),t.hardTfmAry=s(this.hardTfmAry),t.ofsTfmAry=s(this.ofsTfmAry),t.fillRule=this.fillRule,t.fillCol=this.fillCol,t.border=this.border,t.strokeCol=this.strokeCol,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.iso=this.iso,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t.dashed=s(this.dashed),t.dashOffset=this.dashOffset,t}},Path=class extends ClipMask{constructor(t,s){super(t,s),this.type="PATH"}},Shape=class extends Path{constructor(t,s={}){super(t,s),this.type="SHAPE",this.clearFlag=!1,s.hasOwnProperty("iso")?this.setProperty("iso",s.iso):s.hasOwnProperty("isotropic")?this.setProperty("iso",s.isotropic):this.iso=!0}},ImageSegment=class{constructor(t,s=0,i=0,e=0,h=0){this.cropDesc=t,this.cropX=s,this.cropY=i,this.cropWid=e,this.cropHgt=h,"string"==typeof t||t instanceof Image||t instanceof HTMLCanvasElement||(console.warn("Type Error: ImageSegment descriptor"),this.imageDesc=void 0)}},Img=class extends l{constructor(t,s={}){super(),this.type="IMG",this.srcX=0,this.srcY=0,this.srcWid=0,this.srcHgt=0,this.setDescriptor(t),this.pthCmds=new i,this.width=0,this.height=0,this.imgWidth=0,this.imgHeight=0,this.imgLorgX=0,this.imgLorgY=0,this.lorg=1,this.border=!1,this.strokeCol=null,this.lineWidthWC=null,this.lineWidth=null,this.lineCap=null,this.lineJoin=null,this.savScale=1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000";for(let t in s)s.hasOwnProperty(t)&&this.setProperty(t,s[t])}setDescriptor(t){let s;if(t instanceof ImageSegment?(this.srcX=t.cropX,this.srcY=t.cropY,this.srcWid=t.cropWid,this.srcHgt=t.cropHgt,s=t.cropDesc):s=t,"string"==typeof s)return this.imgBuf=new Image,void(this.imgBuf.src=s);s instanceof Image||s instanceof HTMLCanvasElement?this.imgBuf=s:console.warn("Type Error: Img descriptor")}setProperty(...t){a.apply(this,t)}dup(){const t=new Img(this.imgBuf);return t.type=this.type,this.pthCmds.p2dWC&&(t.pthCmds.p2dWC=new Path2D(this.pthCmds.p2dWC),t.pthCmds.length=this.pthCmds.length),t.dwgOrg=s(this.dwgOrg),t.dragNdrop=null,t.hardTfmAry=s(this.hardTfmAry),t.ofsTfmAry=s(this.ofsTfmAry),t.border=this.border,t.strokeCol=this.strokeCol,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.iso=this.iso,t.dashed=s(this.dashed),t.dashOffset=this.dashOffset,t.width=this.width,t.height=this.height,t.imgWidth=this.imgWidth,t.imgHeight=this.imgHeight,t.imgLorgX=this.imgLorgX,t.imgLorgY=this.imgLorgY,t.lorg=this.lorg,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t}formatImg(t){const s=Math.abs(t.yscl/t.xscl);let i,e,h=0,r=0;if(this.iso=!0,!this.imgBuf.width)return void console.warn("Error: in image onload handler yet image NOT loaded!");let o=this.srcX>0?Math.min(this.srcX,this.imgBuf.width-this.srcWid):0,n=this.srcY>0?Math.min(this.srcY,this.imgBuf.height-this.srcHgt):0,a=this.srcWid>0?Math.min(this.imgBuf.width-o,this.srcWid):this.imgBuf.width,l=this.srcHgt>0?Math.min(this.imgBuf.height-n,this.srcHgt):this.imgBuf.height;this.srcX=o,this.srcY=n,this.srcWid=a,this.srcHgt=l,this.imgWidth&&this.imgHeight?(i=this.imgWidth,e=this.imgHeight*s):this.imgWidth&&!this.imgHeight?e=(i=this.imgWidth)*this.imgBuf.height/this.imgBuf.width:this.imgHeight&&!this.imgWidth?i=(e=this.imgHeight*s)*this.imgBuf.width/this.imgBuf.height:e=(i=this.imgBuf.width)*this.imgBuf.height/this.imgBuf.width;const c=i/2,d=e/2,f=[0,[0,0],[c,0],[i,0],[0,d],[c,d],[i,d],[0,e],[c,e],[i,e]];void 0!==f[this.lorg]&&(h=-f[this.lorg][0],r=-f[this.lorg][1]),this.imgLorgX=h,this.imgLorgY=r,this.width=i,this.height=e;const g="M"+h+" "+r+" L"+h+" "+(r+e)+" "+(h+i)+" "+(r+e)+" "+(h+i)+" "+r+" Z";this.pthCmds.p2dWC=new Path2D(g),this.pthCmds.length=g.length}},Text=class extends l{constructor(t,s={}){super(),this.type="TEXT",this.txtStr="",this.pthCmds=new i,this.width=0,this.height=0,this.imgLorgX=0,this.imgLorgY=0,this.lorg=1,this.border=!1,this.fillCol=null,this.bgFillColor=null,this.strokeCol=null,this.fontSize=null,this.fontSizeZC=null,this.fontWeight=null,this.fontFamily=null,this.lineWidthWC=null,this.lineWidth=null,this.lineCap=null,this.lineJoin=null,this.savScale=1,this.shadowOffsetX=0,this.shadowOffsetY=0,this.shadowBlur=0,this.shadowColor="#000000",this.setDescriptor(t);for(let t in s)s.hasOwnProperty(t)&&this.setProperty(t,s[t])}setDescriptor(t){"string"==typeof t?this.txtStr=t:console.warn("Type Error: Text descriptor")}setProperty(...t){a.apply(this,t)}dup(){const t=new Text(this.txtStr.slice(0));return t.type=this.type,this.pthCmds.p2dWC&&(t.pthCmds.p2dWC=new Path2D(this.pthCmds.p2dWC),t.pthCmds.length=this.pthCmds.length),t.dwgOrg=s(this.dwgOrg),t.hardTfmAry=s(this.hardTfmAry),t.ofsTfmAry=s(this.ofsTfmAry),t.border=this.border,t.strokeCol=this.strokeCol,t.fillCol=this.fillCol,t.bgFillColor=this.bgFillColor,t.lineWidth=this.lineWidth,t.lineWidthWC=this.lineWidthWC,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.dashed=s(this.dashed),t.dashOffset=this.dashOffset,t.width=this.width,t.height=this.height,t.imgLorgX=this.imgLorgX,t.imgLorgY=this.imgLorgY,t.lorg=this.lorg,t.fontSize=this.fontSize,t.fontWeight=this.fontWeight,t.fontFamily=this.fontFamily,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur,t.shadowColor=this.shadowColor,t}formatText(t){const s=this.fontSize||t.fontSizeDef,i=this.fontFamily||t.fontFamilyDef,e=this.fontWeight||t.fontWeightDef,h=this.lorg||1;let r,o,n=0,a=0;this.orgXscl||(this.orgXscl=t.xscl);const l=t.xscl/this.orgXscl;this.fontSizeZC=s*l,t.ctx.save(),t.ctx.resetTransform(),t.ctx.font=e+" "+s+"px "+i,r=t.ctx.measureText(this.txtStr).width,t.ctx.restore(),o=s;const c=(r*=l)/2,d=(o*=l)/2,f=[[0,0],[0,o],[c,o],[r,o],[0,d],[c,d],[r,d],[0,0],[c,0],[r,0]];void 0!==f[h]&&(n=-f[h][0],a=f[h][1]),this.imgLorgX=n,this.imgLorgY=a-.25*o;const g="M"+n+" "+a+" L"+n+" "+(a-o)+" "+(n+r)+" "+(a-o)+" "+(n+r)+" "+a+" Z";this.pthCmds.p2dWC=new Path2D(g),this.pthCmds.length=g.length}};class c{constructor(t,s){this.id=t,this.cElem=s,this.dragObjects=[]}}function d(t){let s=t.bkgCanvas.layers[0];for(let i=1;i<t.bkgCanvas.layers.length;i++)if(t.bkgCanvas.layers[i].id===t.cId){s=t.bkgCanvas.layers[i];break}return s}function f(t,s,i){return{x:t*i.a+s*i.c+i.e,y:t*i.b+s*i.d+i.f}}(Cango=class{constructor(t){const s=()=>{const t=this.bkgCanvas.offsetTop+this.bkgCanvas.clientTop,s=this.bkgCanvas.offsetLeft+this.bkgCanvas.clientLeft,i=this.bkgCanvas.offsetWidth,e=this.bkgCanvas.offsetHeight;if(!(Math.abs(i-this.rawWidth)/i<.01&&Math.abs(e-this.rawHeight)/e<.01)&&(this.bkgCanvas.timeline&&this.bkgCanvas.timeline.animTasks.length&&this.deleteAllAnimations(),this.rawWidth=i,this.rawHeight=e,this.aRatio=i/e,this.bkgCanvas===this.cnvs)){this.cnvs.width=i,this.cnvs.height=e;for(let h=1;h<this.bkgCanvas.layers.length;h++){let r=this.bkgCanvas.layers[h].cElem;r&&(r.style.top=t+"px",r.style.left=s+"px",r.style.width=i+"px",r.style.height=e+"px",r.width=i,r.height=e)}}};if("string"==typeof t&&document.getElementById(t)){if(this.cnvs=document.getElementById(t),this.cId=t,!(this.cnvs instanceof HTMLCanvasElement))return void console.warn("Type Error: Cango constructor argument not an HTMLCanvasElement");if(-1!==this.cId.indexOf("_ovl_")){this.cgoType="OVL";const t=this.cId.slice(0,this.cId.indexOf("_ovl_"));this.bkgCanvas=document.getElementById(t)}else this.cgoType="BKG",this.bkgCanvas=this.cnvs;this.rawWidth=this.cnvs.offsetWidth,this.rawHeight=this.cnvs.offsetHeight,this.bkgCanvas.hasOwnProperty("unique")||(this.bkgCanvas.unique=0)}else{if(!(t instanceof HTMLCanvasElement))return void console.warn("Type Error: Cango constructor argument 1");this.cnvs=t,this.bkgCanvas=this.cnvs,this.rawWidth=this.cnvs.width,this.rawHeight=this.cnvs.height,this.bkgCanvas.hasOwnProperty("unique")||(this.bkgCanvas.unique=0),document.contains(t)?(this.cId=this.cnvs.id,this.cgoType="BKG",this.cId||(this.cId="_bkg_"+this.getUnique(),this.cnvs.id=this.cId)):(this.cId="_os_"+this.getUnique(),this.cgoType="OS")}if(this.aRatio=this.rawWidth/this.rawHeight,this.widthPW=100,this.heightPW=100/this.aRatio,!this.bkgCanvas.hasOwnProperty("layers")){this.bkgCanvas.layers=[];const t=new c(this.cId,this.cnvs);if(this.bkgCanvas.layers[0]=t,"OS"!==this.cgoType){let t=void 0;window.addEventListener("resize",()=>{null!=t&&(clearTimeout(t),t=void 0),t=setTimeout(()=>{t=void 0,s()},250)})}}"undefined"==typeof Timeline||this.bkgCanvas.hasOwnProperty("timeline")||(this.bkgCanvas.timeline=new Timeline),this.cnvs.hasOwnProperty("resized")||(this.cnvs.width=this.rawWidth,this.cnvs.height=this.rawHeight,this.cnvs.resized=!0),this.ctx=this.cnvs.getContext("2d"),this.vpW=this.rawWidth,this.vpH=this.rawHeight,this.vpOrgX=0,this.vpOrgYsvg=0,this.vpOrgYrhc=this.rawHeight,this.vpOrgY=this.vpOrgYsvg,this.xscl=1,this.yscl=1,this.yDown=!0,this.isoYscl=this.xscl,this.xoffset=0,this.yoffset=0,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset},this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",this.strokeColDef="rgba(0, 0, 0, 1.0)",this.lineWidthDef=1,this.lineCapDef="butt",this.lineJoinDef="miter",this.fillColDef="rgba(128,128,128,1.0)",this.fontSizeDef=12,this.fontWeightDef=400,this.fontFamilyDef="Consolas, Monaco, 'Andale Mono', monospace",this.clipCount=0,this.setWorldCoordsSVG()}}).prototype.getUnique=function(){return this.bkgCanvas.unique+=1,this.bkgCanvas.unique},Cango.prototype.toPixelCoords=function(t,s){return{x:this.vpOrgX+this.xoffset+t*this.xscl,y:this.vpOrgY+this.yoffset+s*this.yscl}},Cango.prototype.toWorldCoords=function(t,s){return{x:(t-this.vpOrgX-this.xoffset)/this.xscl,y:(s-this.vpOrgY-this.yoffset)/this.yscl}},Cango.prototype.getCursorPosWC=function(t){const s=this.cnvs.getBoundingClientRect();return this.toWorldCoords(t.clientX-s.left,t.clientY-s.top)},Cango.prototype.clearCanvas=function(t){if(t){const s=this.toWorldCoords(0,0),i=this.toWorldCoords(this.rawWidth,this.rawHeight),e=Math.abs(this.yscl/this.xscl),h="M"+s.x+","+i.y*e+" h"+(i.x-s.x)+" v"+(s.y-i.y)*e+" h-"+(i.x-s.x)+" z";this.drawShape(h,{fillColor:t})}else this.ctx.clearRect(0,0,this.rawWidth,this.rawHeight);d(this).dragObjects.length=0,this.cnvs.alphaOvl&&this.cnvs.alphaOvl.parentNode&&this.cnvs.alphaOvl.parentNode.removeChild(this.cnvs.alphaOvl)},Cango.prototype.gridboxPadding=function(t,s,i,e){const h=()=>{this.vpW=this.rawWidth,this.vpH=this.rawHeight,this.vpOrgX=0,this.vpOrgY=0,this.setWorldCoordsSVG()};if(void 0===t)return void h();if(void 0===s){if(t>=50||t<0)return console.warn("Range Error: gridboxPadding right not greater than left"),void h();s=t}(t<0||t>99)&&(t=0),(s<0||s>99/this.aRatio)&&(s=0),void 0===i?i=t:i<0&&(i=0),void 0===e?e=s:e<0&&(e=0);const r=100-t-i,o=100/this.aRatio-e-s;if(r<0||o<0)return console.warn("Range Error: gridboxPadding invalid dimensions"),void h();this.vpW=r*this.rawWidth/100,this.vpH=o*this.rawWidth/100,this.vpOrgX=t*this.rawWidth/100,this.vpOrgYsvg=e*this.rawWidth/100,this.vpOrgYrhc=this.vpOrgYsvg+this.vpH,this.vpOrgY=this.vpOrgYsvg,this.setWorldCoordsSVG()},Cango.prototype.fillGridbox=function(t){const s=Math.abs(this.yscl/this.xscl),i="M"+this.vpOrgXWC+","+this.vpOrgYWC*s+" h"+this.spanX+" v"+this.spanY*s+" h-"+this.spanX+" z";this.drawShape(i,{fillColor:t})},Cango.prototype.setWorldCoordsSVG=function(t=0,s=0,i=0,e=0){this.vpOrgXWC=t,this.vpOrgYWC=s,this.spanX=i,this.spanY=e,this.vpOrgY=this.vpOrgYsvg,i>0?this.xscl=this.vpW/i:(this.xscl=1,this.spanX=this.vpW),e>0?this.yscl=this.vpH/e:(this.yscl=this.xscl,this.spanY=this.vpH/this.xscl),this.yDown=!0,this.xoffset=-t*this.xscl,this.yoffset=-s*this.yscl,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset}},Cango.prototype.setWorldCoordsRHC=function(t=0,s=0,i=0,e=0){this.vpOrgXWC=t,this.vpOrgYWC=s,this.spanX=i,this.spanY=e,this.vpOrgY=this.vpOrgYrhc,i>0?this.xscl=this.vpW/i:(this.xscl=1,this.spanX=this.vpW),e>0?this.yscl=-this.vpH/e:(this.yscl=-this.xscl,this.spanY=this.vpH/this.xscl),this.yDown=!1,this.xoffset=-t*this.xscl,this.yoffset=-s*this.yscl,this.savWC={xscl:this.xscl,yscl:this.yscl,xoffset:this.xoffset,yoffset:this.yoffset}},Cango.prototype.setPropertyDefault=function(t,s){if("string"==typeof t&&null!=s)switch(t.toLowerCase()){case"fillcolor":"string"!=typeof s&&"object"!=typeof s||(this.fillColDef=s);break;case"strokecolor":"string"!=typeof s&&"object"!=typeof s||(this.strokeColDef=s);break;case"linewidth":case"strokewidth":this.lineWidthDef=s;break;case"linecap":"string"!=typeof s||"butt"!==s&&"round"!==s&&"square"!==s||(this.lineCapDef=s);break;case"linejoin":"string"!=typeof s||"bevel"!==s&&"round"!==s&&"miter"!==s||(this.lineJoinDef=s);break;case"fontfamily":"string"==typeof s&&(this.fontFamilyDef=s);break;case"fontsize":this.fontSizeDef=s;break;case"fontweight":("string"==typeof s||s>=100&&s<=900)&&(this.fontWeightDef=s)}},Cango.prototype.dropShadow=function(t){let s=0,i=0,e=0,h="#000000",r=1;null!=t&&(s=t.shadowOffsetX||0,i=t.shadowOffsetY||0,e=t.shadowBlur||0,h=t.shadowColor||"#000000",r="SHAPE"===t.type||"PATH"===t.type&&!t.iso?this.yscl:this.yDown?this.xscl:-this.xscl),this.ctx.shadowOffsetX=s*this.xscl,this.ctx.shadowOffsetY=i*r,this.ctx.shadowBlur=e*this.xscl,this.ctx.shadowColor=h},Cango.prototype.render=function(s,i){const e=Math.abs(this.yscl/this.xscl);this.isoYscl=this.yDown?this.xscl:-this.xscl;const r=t=>{!function(t){t.a=1,t.b=0,t.c=0,t.d=1,t.e=0,t.f=0}(t.netTfm),t.savScale=1,t.netTfm.translateSelf(this.vpOrgX+this.xoffset,this.vpOrgY+this.yoffset),t.netTfm.scaleSelf(this.xscl,this.isoYscl),t.netTfmAry.forEach(s=>{"TRN"===s.type?t.netTfm.translateSelf(s.args[0],s.args[1]*e):"SCL"===s.type?(t.savScale*=Math.abs(s.args[0]),t.netTfm.scaleSelf(s.args[0],s.args[1])):"ROT"===s.type?t.netTfm.rotateSelf(s.args[0]):"SKW"===s.type&&(t.netTfm.skewXSelf(-s.args[0]),t.netTfm.skewYSelf(s.args[1]))})},a=t=>{const s=t.parent?t.parent.netTfmAry:[],i=t.ofsTfmAry.concat(s);t.ofsTfmAry.length=0,t.dwgOrg={x:0,y:0},i.forEach(s=>{o(t.dwgOrg,s,t.iso)}),"GRP"===t.type?t.netTfmAry=i:(t.netTfmAry=t.hardTfmAry.concat(i).reverse(),t.iso||(t.netTfmAry=t.netTfmAry.concat(new n("SCL",1,e))),"IMG"!==t.type||this.yDown?"TEXT"===t.type&&(t.netTfmAry=t.netTfmAry.concat(new n("SCL",1/this.xscl,1/this.isoYscl))):t.netTfmAry=t.netTfmAry.concat(new n("SCL",1,-1)))},l=t=>{"GRP"===t.type&&(t.netTfmAry.length=0,t.children.forEach(t=>{l(t)}))},c=t=>{const s=d(this);if(s!==t.dragNdrop.layer&&t.dragNdrop.layer){const s=t.dragNdrop.layer.dragObjects.indexOf(t);-1!==s&&t.dragNdrop.layer.dragObjects.splice(s,1)}t.dragNdrop.cgo=this,t.dragNdrop.layer=s,t.dragNdrop.layer.dragObjects.includes(t)||t.dragNdrop.layer.dragObjects.push(t)};t.includes(s.type)?(!0!==i&&"clear"!==i||this.clearCanvas(),(t=>{const s=[],i=t=>{a(t),"GRP"===t.type?("undefined"!=typeof Sphere&&t instanceof Sphere&&t.calcShading(),"undefined"!=typeof TextOnPath&&t instanceof TextOnPath&&t.formatTextOnPath(this),t.children.forEach(t=>{i(t)})):s.push(t)};return i(t),s})(s).forEach(t=>{const s=()=>{t.formatImg(this),r(t),this.paintImg(t),t.netTfmAry=[],null!==t.dragNdrop&&(h(this),c(t))};if("IMG"!==t.type){if("TEXT"===t.type)return t.formatText(this),r(t),this.paintText(t),t.netTfmAry=[],void(null!==t.dragNdrop&&(h(this),c(t)));if("CLIP"===t.type)return r(t),this.applyClipMask(t),void(t.netTfmAry=[]);r(t),this.paintPath(t),t.netTfmAry=[],null!==t.dragNdrop&&(h(this),c(t))}else t.imgBuf.complete||t.imgBuf instanceof HTMLCanvasElement?s():t.imgBuf.addEventListener("load",s)}),l(s),this.resetClip()):console.warn("Type Error: render argument 1")},Cango.prototype.genLinGradPX=function(t,s){const i=t.grad.x1,e=t.grad.y1,h=t.grad.x2,r=t.grad.y2,o=f(i,e,s),n=f(h,r,s),a=this.ctx.createLinearGradient(o.x,o.y,n.x,n.y);return t.colorStops.forEach(t=>{a.addColorStop(t.stop,t.color)}),a},Cango.prototype.genRadGradPX=function(t,s,i=1){const e=t.grad.x1,h=t.grad.y1,r=t.grad.r1*i,o=t.grad.x2,n=t.grad.y2,a=t.grad.r2*i,l=f(e,h,s),c=f(o,n,s),d=this.ctx.createRadialGradient(l.x,l.y,r,c.x,c.y,a);return t.colorStops.forEach(t=>{d.addColorStop(t.stop,t.color)}),d},Cango.prototype.paintImg=function(t){const s=t.imgBuf;if(this.ctx.save(),this.ctx.setTransform(t.netTfm.a,t.netTfm.b,t.netTfm.c,t.netTfm.d,t.netTfm.e,t.netTfm.f),this.dropShadow(t),this.ctx.drawImage(s,t.srcX,t.srcY,t.srcWid,t.srcHgt,t.imgLorgX,t.imgLorgY,t.width,t.height),t.border){this.dropShadow(),t.pthCmds.p2dPX=new Path2D,t.pthCmds.p2dPX.addPath(t.pthCmds.p2dWC,t.netTfm),this.ctx.restore(),this.ctx.save(),this.yDown||t.netTfm.scaleSelf(1,-1);const s=t.strokeCol||this.strokeColDef;let i=s;s instanceof LinearGradient?i=this.genLinGradPX(s,t.netTfm):s instanceof RadialGradient&&(i=this.genRadGradPX(s,t.netTfm,t.savScale*this.xscl)),t.lineWidthWC?this.ctx.lineWidth=t.lineWidthWC*t.savScale*this.xscl:this.ctx.lineWidth=t.lineWidth||this.lineWidthDef,this.ctx.strokeStyle=i,this.ctx.lineCap=t.lineCap||this.lineCapDef,this.ctx.lineJoin=t.lineJoin||this.lineJoinDef,this.ctx.stroke(t.pthCmds.p2dPX)}this.ctx.restore()},Cango.prototype.paintPath=function(t){if(!t.pthCmds.length)return void console.warn("Type Error: render Path/Shape descriptor");let s=t.fillCol||this.fillColDef,i=s;s instanceof LinearGradient?i=this.genLinGradPX(s,t.netTfm):s instanceof RadialGradient&&(i=this.genRadGradPX(s,t.netTfm,t.savScale*this.xscl));let e=s=t.strokeCol||this.strokeColDef;s instanceof LinearGradient?e=this.genLinGradPX(s,t.netTfm):s instanceof RadialGradient&&(e=this.genRadGradPX(s,t.netTfm,t.savScale*this.xscl)),this.ctx.save(),t.pthCmds.p2dPX=new Path2D,t.pthCmds.p2dPX.addPath(t.pthCmds.p2dWC,t.netTfm),this.ctx.restore(),this.ctx.save(),this.dropShadow(t),"SHAPE"===t.type&&(this.ctx.fillStyle=i,t.clearFlag?(this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.fill(t.pthCmds.p2dPX,t.fillRule),this.ctx.lineWidth=1.5,this.ctx.stroke(),this.ctx.restore()):this.ctx.fill(t.pthCmds.p2dPX,t.fillRule)),("PATH"===t.type||t.border)&&(t.border&&this.dropShadow(),Array.isArray(t.dashed)&&t.dashed.length&&(this.ctx.setLineDash(t.dashed),this.ctx.lineDashOffset=t.dashOffset||0),t.lineWidthWC?this.ctx.lineWidth=t.lineWidthWC*t.savScale*this.xscl:this.ctx.lineWidth=t.lineWidth||this.lineWidthDef,this.ctx.strokeStyle=e,this.ctx.lineCap=t.lineCap||this.lineCapDef,this.ctx.lineJoin=t.lineJoin||this.lineJoinDef,this.ctx.stroke(t.pthCmds.p2dPX),this.ctx.setLineDash([]),this.ctx.lineDashOffset=0),this.ctx.restore()},Cango.prototype.applyClipMask=function(t){t.pthCmds.length?(this.ctx.save(),this.clipCount+=1,t.pthCmds.p2dPX=new Path2D,t.pthCmds.p2dPX.addPath(t.pthCmds.p2dWC,t.netTfm),this.ctx.clip(t.pthCmds.p2dPX,t.fillRule),this.ctx.save(),this.ctx.fillStyle="rgba(0, 0, 0, 0.0)",this.ctx.fillRect(0,0,1,1),this.ctx.restore()):this.resetClip()},Cango.prototype.resetClip=function(){for(;this.clipCount>0;)this.ctx.restore(),this.clipCount--},Cango.prototype.genLinGradWC=function(t){const s=this.ctx.createLinearGradient(t.grad.x1,t.grad.y1*this.isoYscl,t.grad.x2,t.grad.y2*this.isoYscl);return t.colorStops.forEach(t=>{s.addColorStop(t.stop,t.color)}),s},Cango.prototype.genRadGradWC=function(t){const s=this.ctx.createRadialGradient(t.grad.x1,t.grad.y1*this.isoYscl,t.grad.r1,t.grad.x2,t.grad.y2*this.isoYscl,t.grad.r2);return t.colorStops.forEach(t=>{s.addColorStop(t.stop,t.color)}),s},Cango.prototype.paintText=function(t){const s=t.fontWeight||this.fontWeightDef,i=t.fontFamily||this.fontFamilyDef,e=t.fontSizeZC;let h=t.strokeCol||this.strokeColDef,r=h;h instanceof LinearGradient?r=this.genLinGradWC(h):h instanceof RadialGradient&&(r=this.genRadGradWC(h));let o,n=h=t.fillCol||this.fillColDef;h instanceof LinearGradient?n=this.genLinGradWC(h):h instanceof RadialGradient&&(n=this.genRadGradWC(h)),t.bgFillColor&&("string"==typeof(h=t.bgFillColor)?o=t.bgFillColor:h instanceof LinearGradient?o=this.genLinGradWC(h):h instanceof RadialGradient&&(o=this.genRadGradWC(h))),this.ctx.save(),this.ctx.setTransform(t.netTfm.a,t.netTfm.b,t.netTfm.c,t.netTfm.d,t.netTfm.e,t.netTfm.f),o&&(this.ctx.save(),this.ctx.fillStyle=o,this.ctx.strokeStyle=o,this.ctx.lineWidth=.1*e,this.ctx.fill(t.pthCmds.p2dWC),this.ctx.stroke(t.pthCmds.p2dWC),this.ctx.restore()),this.ctx.font=s+" "+e+"px "+i,this.ctx.fillStyle=n,this.ctx.fillText(t.txtStr,t.imgLorgX,t.imgLorgY),t.border&&(this.dropShadow(),t.lineWidthWC?this.ctx.lineWidth=t.lineWidthWC*this.xscl:this.ctx.lineWidth=t.lineWidth||this.lineWidthDef,this.ctx.strokeStyle=r,this.ctx.lineCap=t.lineCap||this.lineCapDef,this.ctx.lineJoin=t.lineJoin||this.lineJoinDef,this.ctx.strokeText(t.txtStr,t.imgLorgX,t.imgLorgY)),this.ctx.restore()},Cango.prototype.drawPath=function(t,s){const i=new Path(t,s);this.render(i)},Cango.prototype.drawShape=function(t,s){const i=new Shape(t,s);this.render(i)},Cango.prototype.drawText=function(t,s){const i=new Text(t,s);this.render(i)},Cango.prototype.drawImg=function(t,s){const i=new Img(t,s);this.render(i)},Cango.prototype.clearShape=function(t,s){const i=new Shape(t,s);i.clearFlag=!0,this.render(i)},Cango.prototype.createLayer=function(){const t=this.rawWidth,s=this.rawHeight,i=this.bkgCanvas.layers.length;if("OVL"===this.cgoType||"OS"===this.cgoType)return console.log("createLayer: offscreen canvases and layers cannot create layers"),"";const e=this.cId+"_ovl_"+this.getUnique(),h="<canvas id='"+e+"' style='position:absolute' width='"+t+"' height='"+s+"'></canvas>";this.bkgCanvas.layers[i-1].cElem.insertAdjacentHTML("afterend",h);const r=document.getElementById(e);r.style.backgroundColor="transparent",r.style.left=this.bkgCanvas.offsetLeft+this.bkgCanvas.clientLeft+"px",r.style.top=this.bkgCanvas.offsetTop+this.bkgCanvas.clientTop+"px",r.style.width=this.bkgCanvas.offsetWidth+"px",r.style.height=this.bkgCanvas.offsetHeight+"px";const o=new c(e,r);return this.bkgCanvas.layers.push(o),e},Cango.prototype.deleteLayer=function(t){for(let s=1;s<this.bkgCanvas.layers.length;s++)if(this.bkgCanvas.layers[s].id===t){let t=this.bkgCanvas.layers[s].cElem;t&&(t.alphaOvl&&t.alphaOvl.parentNode&&t.alphaOvl.parentNode.removeChild(t.alphaOvl),t.parentNode.removeChild(t)),this.bkgCanvas.layers.splice(s,1)}},Cango.prototype.deleteAllLayers=function(){for(let t=this.bkgCanvas.layers.length-1;t>0;t--){let s=this.bkgCanvas.layers[t].cElem;s&&(s.alphaOvl&&s.alphaOvl.parentNode&&s.alphaOvl.parentNode.removeChild(s.alphaOvl),s.parentNode.removeChild(s)),this.bkgCanvas.layers.splice(t,1)}},Cango.prototype.dupCtx=function(t){this.vpOrgXWC=t.vpOrgXWC,this.vpOrgYWC=t.vpOrgYWC,this.spanX=t.spanX,this.spanY=t.spanY,this.vpW=t.vpW,this.vpH=t.vpH,this.vpOrgYsvg=t.vpOrgYsvg,this.vpOrgYrhc=t.vpOrgYrhc,this.vpOrgX=t.vpOrgX,this.vpOrgY=t.vpOrgY,this.xscl=t.xscl,this.yscl=t.yscl,this.yDown=t.yDown,this.xoffset=t.xoffset,this.yoffset=t.yoffset,this.savWC=s(t.savWC),this.strokeColDef=t.strokeColDef.slice(0),this.lineWidthDef=t.lineWidthDef,this.lineCapDef=t.lineCapDef.slice(0),this.lineJoinDef=t.lineJoinDef.slice(0),this.fillColDef=t.fillColDef.slice(0),this.fontSizeDef=t.fontSizeDef,this.fontWeightDef=t.fontWeightDef,this.fontFamilyDef=t.fontFamilyDef.slice(0)},initZoomPan=function(t,s,i){const e=Array.isArray(s)?s:[s],h=["m",-7,-2,"l",7,5,7,-5];function r(t){e.forEach(s=>{const i=s.toPixelCoords(0,0),e=s.rawWidth/2-i.x,h=s.rawHeight/2-i.y;s.xoffset+=e-e/t,s.yoffset+=h-h/t,s.xscl/=t,s.yscl/=t}),i()}function o(t,s){e.forEach(i=>{i.xoffset-=t,i.yoffset-=s}),i()}const n=new Cango(t);n.clearCanvas(),n.setWorldCoordsRHC(44-n.rawWidth,44-n.rawHeight),n.drawShape(rectangle(114,80),{x:-17,y:0,fillColor:"rgba(0, 50, 0, 0.12)"});const a=new Shape(rectangle(20,20,2),{fillColor:"rgba(0,0,0,0.2)"});a.enableDrag(null,null,function(){e.forEach(t=>{t.xscl=t.savWC.xscl,t.yscl=t.savWC.yscl,t.xoffset=t.savWC.xoffset,t.yoffset=t.savWC.yoffset}),i()}),n.render(a);const l=new Shape(rectangle(20,20,2),{x:22,y:0,fillColor:"rgba(0,0,0,0.2)"});l.enableDrag(null,null,function(){o(50,0)}),n.render(l);const c=new Shape(rectangle(20,20,2),{x:0,y:22,fillColor:"rgba(0,0,0,0.2)"});c.enableDrag(null,null,function(){o(0,-50)}),n.render(c);const d=new Shape(rectangle(20,20,2),{x:-22,y:0,fillColor:"rgba(0,0,0,0.2)"});d.enableDrag(null,null,function(){o(-50,0)}),n.render(d);const f=new Shape(rectangle(20,20,2),{x:0,y:-22,fillColor:"rgba(0,0,0,0.2)"});f.enableDrag(null,null,function(){o(0,50)}),n.render(f);const g=new Shape(rectangle(20,20,2),{x:-56,y:11,fillColor:"rgba(0,0,0,0.2)"});g.enableDrag(null,null,function(){r(1/1.2)}),n.render(g);const p=new Shape(rectangle(20,20,2),{x:-56,y:-11,fillColor:"rgba(0,0,0,0.2)"});p.enableDrag(null,null,function(){r(1.2)}),n.render(p),n.drawPath(h,{x:0,y:22,strokeColor:"white",lineWidth:2}),n.drawPath(h,{degs:-90,x:22,y:0,strokeColor:"white",lineWidth:2}),n.drawPath(h,{degs:90,x:-22,y:0,strokeColor:"white",lineWidth:2}),n.drawPath(h,{degs:180,x:0,y:-22,strokeColor:"white",lineWidth:2}),n.drawPath(["m",-7,0,"l",14,0,"m",-7,-7,"l",0,14],{x:-56,y:11,strokeColor:"white",lineWidth:2}),n.drawPath(["m",-7,0,"l",14,0],{x:-56,y:-11,strokeColor:"white",lineWidth:2}),n.drawPath(["m",-6,-6,"l",12,12,"m",0,-12,"l",-12,12],{strokeColor:"white",lineWidth:2})}}();