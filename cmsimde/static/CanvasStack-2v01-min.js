var CanvasStack;!function(){"use strict";class s{constructor(s,a){this.id=s,this.cElem=a,this.dragObjects=[]}}CanvasStack=class{constructor(a,t){const e=this;if(-1!==a.indexOf("_ovl_"))return console.error("CanvasStack: canvas must be a background canvas not an overlay"),{};if(this.cId=a,this.stackLimit=t||6,this.bkgCanvas=document.getElementById(a),this.rawWidth=this.bkgCanvas.offsetWidth,this.rawHeight=this.bkgCanvas.offsetHeight,this.bkgCanvas.resizeFns=[],!this.bkgCanvas.hasOwnProperty("layers")){this.bkgCanvas.layers=[];let a=new s(this.cId,this.bkgCanvas);this.bkgCanvas.layers[0]=a,function(s,a){let t=void 0;window.addEventListener("resize",()=>{null!=t&&(clearTimeout(t),t=void 0),t=setTimeout(()=>{t=void 0,s(),e.bkgCanvas.resizeFns.forEach(s=>s())},a)})}(function(){const s=e.bkgCanvas.offsetTop+e.bkgCanvas.clientTop,a=e.bkgCanvas.offsetLeft+e.bkgCanvas.clientLeft,t=e.bkgCanvas.offsetWidth,n=e.bkgCanvas.offsetHeight;if(!(Math.abs(t-e.rawWidth)/t<.01&&Math.abs(n-e.rawHeight)/n<.01))for(let i=1;i<e.bkgCanvas.layers.length;i++){let l=e.bkgCanvas.layers[i].cElem;l&&(l.style.top=s+"px",l.style.left=a+"px",l.style.width=t+"px",l.style.height=n+"px",l.width=t,l.height=n)}},250)}this.bkgCanvas.hasOwnProperty("unique")||(this.bkgCanvas.unique=0)}createLayer(){const a=this.rawWidth,t=this.rawHeight,e=this.bkgCanvas.layers.length;if(!this.bkgCanvas||!this.bkgCanvas.layers)return void console.log("CanvasStack: missing background canvas");if(this.bkgCanvas.layers.length>=this.stackLimit)return void console.error("CanvasStack: too many layers");this.bkgCanvas.unique+=1;const n=this.bkgCanvas.unique.toString(),i=this.cId+"_ovl_"+n,l="<canvas id='"+i+"' style='position:absolute' width='"+a+"' height='"+t+"'></canvas>";this.bkgCanvas.layers[e-1].cElem.insertAdjacentHTML("afterend",l);const h=document.getElementById(i);h.style.backgroundColor="transparent",h.style.left=this.bkgCanvas.offsetLeft+this.bkgCanvas.clientLeft+"px",h.style.top=this.bkgCanvas.offsetTop+this.bkgCanvas.clientTop+"px",h.style.width=this.bkgCanvas.offsetWidth+"px",h.style.height=this.bkgCanvas.offsetHeight+"px";let r=new s(i,h);return this.bkgCanvas.layers.push(r),i}deleteLayer(s){if(this.bkgCanvas&&this.bkgCanvas.layers){for(let a=1;a<this.bkgCanvas.layers.length;a++)if(this.bkgCanvas.layers[a].id===s){let s=this.bkgCanvas.layers[a].cElem;s&&s.parentNode.removeChild(s),this.bkgCanvas.layers.splice(a,1)}}else console.log("CanvasStack: missing background canvas")}deleteAllLayers(){if(this.bkgCanvas&&this.bkgCanvas.layers){for(let s=this.bkgCanvas.layers.length-1;s>0;s--){let a=this.bkgCanvas.layers[s].cElem;if(a){let s=a.parentNode.removeChild(a);s=null}this.bkgCanvas.layers.splice(s,1)}this.bkgCanvas.resizeFns.length=0}else console.log("CanvasStack: missing background canvas")}addResizeCallback(s){this.bkgCanvas.resizeFns.push(s)}}}();